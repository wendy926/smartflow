<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>简单测试</title>
</head>

<body>
  <h1>JavaScript执行测试</h1>
  <div id="test-result">测试中...</div>

  <script>
    console.log('页面JavaScript开始执行');

    // 测试分类映射
    function testCategoryDisplay(category) {
      const categoryMap = {
        'mainstream': '主流币',
        'high-cap-trending': '高市值趋势币',
        'trending': '热点币',
        'smallcap': '小币'
      };
      return categoryMap[category] || '未知';
    }

    // 测试API调用
    async function testAPI() {
      try {
        console.log('开始API调用');
        const response = await fetch('/api/signals');
        const data = await response.json();
        console.log('API调用成功，数据长度:', data.length);

        const solusdt = data.find(item => item.symbol === 'SOLUSDT');
        if (solusdt) {
          const display = testCategoryDisplay(solusdt.category);
          document.getElementById('test-result').innerHTML = `
                        <p>SOLUSDT 原始分类: ${solusdt.category}</p>
                        <p>SOLUSDT 显示分类: ${display}</p>
                        <p>测试时间: ${new Date().toLocaleString()}</p>
                    `;
        } else {
          document.getElementById('test-result').innerHTML = '未找到SOLUSDT';
        }
      } catch (error) {
        console.error('API调用失败:', error);
        document.getElementById('test-result').innerHTML = 'API调用失败: ' + error.message;
      }
    }

    // 立即执行测试
    testAPI();
  </script>
</body>

</html>