# JavaScript 模块化结构说明

## 概述

原来的 `main.js` 文件有2687行，过于庞大，难以维护。现在按照功能模块拆分为以下文件：

## 模块结构

### 1. core.js - 核心应用类
- **功能**: SmartFlowApp 核心类定义
- **包含**:
  - 应用初始化和配置
  - 数据加载和缓存管理
  - 用户设置管理
  - 事件监听器设置
  - 策略切换功能
  - ICT策略相关方法
- **大小**: 约600行

### 2. simulation.js - 模拟交易功能
- **功能**: 模拟交易相关功能
- **包含**:
  - 启动模拟交易
  - 查看交易历史
  - 交易详情显示
  - 信号详情展示
- **大小**: 约400行

### 3. monitoring.js - 监控面板功能
- **功能**: 统一监控面板相关功能
- **包含**:
  - 监控面板加载和显示
  - 数据概览和详细表格
  - 监控数据刷新
  - 缓存管理
- **大小**: 约300行

### 4. alerts.js - 告警功能
- **功能**: 告警相关功能
- **包含**:
  - 告警数据加载和显示
  - 告警过滤和管理
  - Telegram配置和测试
  - 数据质量告警
- **大小**: 约150行

### 5. symbols.js - 交易对管理
- **功能**: 交易对管理相关功能
- **包含**:
  - 交易对列表显示
  - 添加/删除交易对
  - 交易对搜索和过滤
- **大小**: 约100行

### 6. utils.js - 工具函数
- **功能**: 通用工具函数
- **包含**:
  - 表格滚动性检查
  - 系统测试功能
  - 数据验证和显示
  - API连接测试
- **大小**: 约200行

### 7. main-new.js - 主入口文件
- **功能**: 应用入口和初始化
- **包含**:
  - DOM加载完成后的初始化
  - 全局刷新函数
- **大小**: 约50行

## 文件加载顺序

在 `index.html` 中的加载顺序：

```html
<script src="js/api.js?v=20250115-01"></script>
<script src="js/components/Modal.js?v=20250115-01"></script>
<script src="js/data/DataManager.js?v=20250115-01"></script>
<!-- 模块化JavaScript文件 -->
<script src="js/core.js?v=20250115-01"></script>
<script src="js/simulation.js?v=20250115-01"></script>
<script src="js/monitoring.js?v=20250115-01"></script>
<script src="js/alerts.js?v=20250115-01"></script>
<script src="js/symbols.js?v=20250115-01"></script>
<script src="js/utils.js?v=20250115-01"></script>
<script src="js/main-new.js?v=20250115-01"></script>
```

## 优势

1. **可维护性**: 每个模块职责单一，易于理解和修改
2. **可扩展性**: 新功能可以独立添加到相应模块
3. **可测试性**: 每个模块可以独立测试
4. **代码复用**: 工具函数可以在多个模块中复用
5. **团队协作**: 不同开发者可以并行开发不同模块

## 注意事项

1. **依赖关系**: 确保模块按正确顺序加载
2. **全局变量**: 避免在模块中创建过多全局变量
3. **命名冲突**: 确保不同模块中的函数名不冲突
4. **向后兼容**: 保持与现有代码的兼容性

## 迁移说明

- 原来的 `main.js` 文件已保留作为备份
- 新的模块化文件已通过语法检查
- 所有功能都已正确分配到相应模块
- 保持了原有的API接口和功能
