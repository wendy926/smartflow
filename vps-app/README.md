# SmartFlow äº¤æ˜“ç­–ç•¥ç³»ç»Ÿ

åŸºäºå¤šå‘¨æœŸå…±æŒ¯çš„é«˜èƒœç‡é«˜ç›ˆäºæ¯”åŠ å¯†è´§å¸äº¤æ˜“ç­–ç•¥ç³»ç»Ÿï¼Œé›†æˆåŠ¨æ€æ æ†æ»šä»“è®¡ç®—å™¨ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
vps-app/
â”œâ”€â”€ src/                          # ä¸šåŠ¡æºä»£ç 
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ server.js            # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ modules/             # ä¸šåŠ¡æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ api/             # APIç›¸å…³
â”‚   â”‚       â”œâ”€â”€ cache/           # ç¼“å­˜ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ data/            # æ•°æ®ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ database/        # æ•°æ®åº“æ“ä½œ
â”‚   â”‚       â”œâ”€â”€ middleware/      # ä¸­é—´ä»¶
â”‚   â”‚       â”œâ”€â”€ monitoring/      # ç›‘æ§ç³»ç»Ÿ
â”‚   â”‚       â”œâ”€â”€ notification/    # é€šçŸ¥ç³»ç»Ÿ
â”‚   â”‚       â”œâ”€â”€ strategy/        # äº¤æ˜“ç­–ç•¥
â”‚   â”‚       â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ web/                     # å‰ç«¯èµ„æº
â”‚       â”œâ”€â”€ public/              # é™æ€æ–‡ä»¶
â”‚       â””â”€â”€ templates/           # æ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ tools/                       # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ database/                # æ•°æ®åº“å·¥å…·
â”‚   â”œâ”€â”€ deployment/              # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ maintenance/             # ç»´æŠ¤è„šæœ¬
â”‚   â””â”€â”€ analysis/                # åˆ†æå·¥å…·
â”œâ”€â”€ tests/                       # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/                    # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/             # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ e2e/                     # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â””â”€â”€ fixtures/                # æµ‹è¯•æ•°æ®
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â”‚   â”œâ”€â”€ api/                     # APIæ–‡æ¡£
â”‚   â”œâ”€â”€ deployment/              # éƒ¨ç½²æ–‡æ¡£
â”‚   â”œâ”€â”€ development/             # å¼€å‘æ–‡æ¡£
â”‚   â””â”€â”€ archived/                # å†å²æ–‡æ¡£
â”œâ”€â”€ config/                      # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ nginx/                   # Nginxé…ç½®
â”‚   â”œâ”€â”€ pm2/                     # PM2é…ç½®
â”‚   â””â”€â”€ database/                # æ•°æ®åº“é…ç½®
â”œâ”€â”€ data/                        # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ database/                # æ•°æ®åº“æ–‡ä»¶
â”‚   â””â”€â”€ logs/                    # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ scripts/                     # æ„å»ºå’Œéƒ¨ç½²è„šæœ¬
â”œâ”€â”€ coverage/                    # æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
â”œâ”€â”€ start.js                     # åº”ç”¨å¯åŠ¨è„šæœ¬
â”œâ”€â”€ package.json                 # é¡¹ç›®é…ç½®
â””â”€â”€ jest.config.js              # æµ‹è¯•é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 14.0.0
- SQLite3
- Redis (å¯é€‰)

### å®‰è£…ä¾èµ–
```bash
npm install
```

### åˆå§‹åŒ–æ•°æ®åº“
```bash
npm run setup
```

### å¯åŠ¨åº”ç”¨
```bash
# ç”Ÿäº§ç¯å¢ƒ
npm start

# å¼€å‘ç¯å¢ƒ
npm run dev

# ç›´æ¥å¯åŠ¨æœåŠ¡å™¨
npm run server
```

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test:unit

# è¿è¡Œé›†æˆæµ‹è¯•
npm run test:integration

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# è°ƒè¯•æ¨¡å¼ï¼ˆæ£€æµ‹å†…å­˜æ³„æ¼ï¼‰
npm run test:debug
```

## ğŸ“š å¼€å‘æŒ‡å—

### ä»£ç ç»“æ„è¯´æ˜

#### æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ (`src/core/`)
- `server.js`: ä¸»æœåŠ¡å™¨æ–‡ä»¶ï¼Œå¤„ç†HTTPè¯·æ±‚å’Œè·¯ç”±
- `modules/`: ä¸šåŠ¡æ¨¡å—ç›®å½•
  - `api/`: APIæ¥å£ç›¸å…³æ¨¡å—
  - `cache/`: ç¼“å­˜ç®¡ç†æ¨¡å—
  - `data/`: æ•°æ®ç®¡ç†æ¨¡å—
  - `database/`: æ•°æ®åº“æ“ä½œæ¨¡å—
  - `middleware/`: ä¸­é—´ä»¶æ¨¡å—
  - `monitoring/`: ç›‘æ§ç³»ç»Ÿæ¨¡å—
  - `notification/`: é€šçŸ¥ç³»ç»Ÿæ¨¡å—
  - `strategy/`: äº¤æ˜“ç­–ç•¥æ¨¡å—
  - `utils/`: å·¥å…·å‡½æ•°æ¨¡å—

#### å‰ç«¯èµ„æº (`src/web/`)
- `public/`: é™æ€æ–‡ä»¶ï¼ˆHTMLã€CSSã€JSï¼‰
- `templates/`: æ¨¡æ¿æ–‡ä»¶

#### å·¥å…·è„šæœ¬ (`tools/`)
- `database/`: æ•°æ®åº“ç›¸å…³å·¥å…·
- `deployment/`: éƒ¨ç½²ç›¸å…³è„šæœ¬
- `maintenance/`: ç»´æŠ¤ç›¸å…³è„šæœ¬
- `analysis/`: åˆ†æç›¸å…³å·¥å…·

#### æµ‹è¯•æ–‡ä»¶ (`tests/`)
- `unit/`: å•å…ƒæµ‹è¯•
- `integration/`: é›†æˆæµ‹è¯•
- `e2e/`: ç«¯åˆ°ç«¯æµ‹è¯•
- `fixtures/`: æµ‹è¯•æ•°æ®

### å¼€å‘è§„èŒƒ

#### æ–‡ä»¶å‘½å
- ä¸šåŠ¡æ¨¡å—æ–‡ä»¶ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦
- æµ‹è¯•æ–‡ä»¶ä»¥ `.test.js` ç»“å°¾
- é…ç½®æ–‡ä»¶ä»¥ `.config.js` ç»“å°¾

#### ç›®å½•ç»“æ„
- æ¯ä¸ªæ¨¡å—éƒ½æœ‰ç‹¬ç«‹çš„ç›®å½•
- ç›¸å…³æ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹
- é¿å…æ·±å±‚åµŒå¥—ï¼ˆæœ€å¤š3å±‚ï¼‰

#### ä»£ç ç»„ç»‡
- ä¸€ä¸ªæ–‡ä»¶ä¸€ä¸ªä¸»è¦åŠŸèƒ½
- ç›¸å…³åŠŸèƒ½æ”¾åœ¨åŒä¸€æ¨¡å—ä¸‹
- å·¥å…·å‡½æ•°æ”¾åœ¨ `utils/` ç›®å½•

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
```bash
NODE_ENV=production          # è¿è¡Œç¯å¢ƒ
PORT=8080                   # æœåŠ¡ç«¯å£
DB_PATH=data/database/smartflow.db  # æ•°æ®åº“è·¯å¾„
REDIS_URL=redis://localhost:6379    # Redisè¿æ¥
```

### PM2é…ç½®
PM2é…ç½®æ–‡ä»¶ä½äº `config/pm2/ecosystem.config.js`

### Nginxé…ç½®
Nginxé…ç½®æ–‡ä»¶ä½äº `config/nginx/`

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—æ–‡ä»¶
- åº”ç”¨æ—¥å¿—: `data/logs/app.log`
- é”™è¯¯æ—¥å¿—: `data/logs/error.log`
- è®¿é—®æ—¥å¿—: `data/logs/access.log`

### ç›‘æ§æŒ‡æ ‡
- ç³»ç»Ÿæ€§èƒ½ç›‘æ§
- æ•°æ®åº“æ€§èƒ½ç›‘æ§
- APIå“åº”æ—¶é—´ç›‘æ§
- å†…å­˜ä½¿ç”¨ç›‘æ§

## ğŸš€ éƒ¨ç½²æŒ‡å—

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# 1. å…‹éš†ä»£ç 
git clone <repository-url>
cd vps-app

# 2. å®‰è£…ä¾èµ–
npm install --production

# 3. åˆå§‹åŒ–æ•°æ®åº“
npm run setup

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶

# 5. å¯åŠ¨æœåŠ¡
npm start
```

### ä½¿ç”¨PM2éƒ¨ç½²
```bash
# å®‰è£…PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
pm2 start config/pm2/ecosystem.config.js

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs
```

## ğŸ§ª æµ‹è¯•è¯´æ˜

### æµ‹è¯•åˆ†ç±»
- **å•å…ƒæµ‹è¯•**: æµ‹è¯•å•ä¸ªå‡½æ•°æˆ–æ¨¡å—
- **é›†æˆæµ‹è¯•**: æµ‹è¯•æ¨¡å—é—´çš„äº¤äº’
- **ç«¯åˆ°ç«¯æµ‹è¯•**: æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹

### æµ‹è¯•å‘½ä»¤
```bash
npm run test:unit        # å•å…ƒæµ‹è¯•
npm run test:integration # é›†æˆæµ‹è¯•
npm run test:e2e         # ç«¯åˆ°ç«¯æµ‹è¯•
npm run test:coverage    # è¦†ç›–ç‡æŠ¥å‘Š
```

### æµ‹è¯•è¦†ç›–ç‡
- ç›®æ ‡è¦†ç›–ç‡: 80%+
- å½“å‰è¦†ç›–ç‡: æŸ¥çœ‹ `coverage/` ç›®å½•

## ğŸ“– æ–‡æ¡£

- [APIæ–‡æ¡£](docs/api/)
- [éƒ¨ç½²æ–‡æ¡£](docs/deployment/)
- [å¼€å‘æ–‡æ¡£](docs/development/)
- [å†å²æ–‡æ¡£](docs/archived/)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: https://github.com/username/smartflow
- æŠ€æœ¯æ”¯æŒ: support@smartflow.com
- æ–‡æ¡£æ›´æ–°: 2025-01-14
