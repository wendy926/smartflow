<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartFlow 交易策略仪表板</title>
  <link rel="stylesheet" href="css/main.css">
</head>

<body>
  <div class="container">
    <!-- 头部 -->
    <header class="header">
      <h1>🚀 SmartFlow 交易策略仪表板</h1>
      <p>基于多周期共振的高胜率高盈亏比加密货币交易策略</p>
    </header>

    <!-- 控制面板 -->
    <div class="controls">
      <div class="control-group">
        <label for="refreshInterval">⏰ 自动刷新</label>
        <select id="refreshInterval">
          <option value="300000">5分钟</option>
          <option value="900000">15分钟</option>
          <option value="1800000">30分钟</option>
          <option value="3600000">1小时</option>
          <option value="14400000">4小时</option>
          <option value="86400000">1天</option>
        </select>
      </div>

      <div class="control-group">
        <button class="btn primary" onclick="refreshAllSignals()">🔄 手动刷新</button>
      </div>

      <div class="control-group">
        <label for="maxLossAmount">💰 单次交易最大损失：</label>
        <select id="maxLossAmount">
          <option value="10">10 USDT</option>
          <option value="20">20 USDT</option>
          <option value="50">50 USDT</option>
          <option value="100" selected>100 USDT</option>
        </select>
      </div>
    </div>

    <!-- 统计概览 -->
    <div class="stats-grid" id="statsGrid">
      <div class="stat-card">
        <h3 id="totalSignals">0</h3>
        <p>总信号数</p>
      </div>
      <div class="stat-card">
        <h3 id="longSignals">0</h3>
        <p>多头信号</p>
      </div>
      <div class="stat-card">
        <h3 id="shortSignals">0</h3>
        <p>空头信号</p>
      </div>
      <div class="stat-card">
        <h3 id="lastUpdate">--</h3>
        <p>最后更新</p>
      </div>
      <div class="stat-card">
        <h3 id="winRate">0%</h3>
        <p>策略胜率</p>
        <small id="winRateDetails">0/0</small>
      </div>
    </div>

    <!-- 信号表格 -->
    <div class="table-container">
      <h3>📊 交易信号</h3>
      <div class="table-wrapper">
        <table id="signalsTable">
          <thead>
            <tr>
              <th>详情</th>
              <th>交易对</th>
              <th>趋势</th>
              <th>信号</th>
              <th>入场执行</th>
              <th>当前价格</th>
              <th>VWAP</th>
              <th>成交量倍数</th>
              <th>OI变化%</th>
              <th>资金费率</th>
              <th>CVD</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody id="signalsTableBody">
            <tr>
              <td colspan="12" style="text-align: center; color: #6c757d;">
                点击"刷新所有信号"开始分析
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- 模拟交易历史 -->
    <div class="table-container">
      <h3>📊 模拟交易历史</h3>
      <div class="table-wrapper">
        <table id="simulationTable">
          <thead>
            <tr>
              <th>交易对</th>
              <th>入场价格</th>
              <th>止损价格</th>
              <th>止盈价格</th>
              <th>杠杆倍数</th>
              <th>最小保证金</th>
              <th>入场时间</th>
              <th>出场时间</th>
              <th>出场价格</th>
              <th>出场原因</th>
              <th>触发原因</th>
              <th>盈亏</th>
              <th>结果</th>
            </tr>
          </thead>
          <tbody id="simulationTableBody">
            <tr>
              <td colspan="13" style="text-align: center; color: #6c757d;">
                加载中...
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- 底部控制按钮 -->
    <div class="bottom-controls">
      <button class="btn secondary" onclick="testAPIConnection()">🧪 测试API连接</button>
      <button class="btn secondary" onclick="loadUnifiedMonitoring()">📊 统一监控中心</button>
      <button class="btn secondary" onclick="viewTelegramConfig()">📱 Telegram通知</button>
      <button class="btn calculator-btn" onclick="openRollupCalculator()">📊 斐波拉契滚仓计算器</button>
      <button class="btn symbols-list-btn" onclick="showSymbolsList()">📋 交易对管理</button>
      <button class="btn secondary" onclick="toggleSimulationHistory()">📈 模拟交易历史</button>
    </div>

    <!-- 策略规则说明 -->
    <div class="rules-section" id="rulesSection" style="display: none;">
      <h2>📋 交易策略规则说明</h2>
      <!-- 规则内容将通过JavaScript动态加载 -->
    </div>
  </div>

  <!-- 加载JavaScript模块 -->
  <script src="js/api.js"></script>
  <script src="js/components/Modal.js"></script>
  <script src="js/data/DataManager.js"></script>
  <script src="js/main.js"></script>
</body>

</html>