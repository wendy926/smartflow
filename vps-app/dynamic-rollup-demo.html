<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>动态杠杆滚仓计算器演示 - SmartFlow</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 30px;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .feature-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }

    .feature-card h3 {
      color: #667eea;
      margin-top: 0;
    }

    .demo-link {
      display: inline-block;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      text-decoration: none;
      padding: 15px 30px;
      border-radius: 8px;
      font-weight: 600;
      text-align: center;
      margin: 20px auto;
      display: block;
      max-width: 300px;
      transition: transform 0.3s ease;
    }

    .demo-link:hover {
      transform: translateY(-2px);
      color: white;
      text-decoration: none;
    }

    .highlight {
      background: #e3f2fd;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #2196f3;
      margin: 20px 0;
    }

    .code-example {
      background: #f4f4f4;
      padding: 15px;
      border-radius: 5px;
      font-family: 'Courier New', monospace;
      margin: 10px 0;
      overflow-x: auto;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>🚀 动态杠杆滚仓计算器优化完成</h1>

    <div class="highlight">
      <h3>✨ 主要优化内容</h3>
      <ul>
        <li><strong>保留初单计算模块</strong> - 用户输入最大损失金额、当前价格、止损价格、目标价格</li>
        <li><strong>移除对比杠杆策略</strong> - 专注于动态杠杆滚仓方案</li>
        <li><strong>实现动态杠杆滚仓</strong> - 基于rolling-v1.md文档的核心算法</li>
        <li><strong>参数化配置</strong> - 滚仓触发比例、杠杆递减系数、落袋比例、最低杠杆</li>
      </ul>
    </div>

    <div class="feature-grid">
      <div class="feature-card">
        <h3>🎯 核心算法</h3>
        <p>基于文档中的Step 1-4实现：</p>
        <ul>
          <li>初期高杠杆快速积累浮盈</li>
          <li>浮盈达到阈值时抽出本金</li>
          <li>杠杆递减，落袋部分利润</li>
          <li>剩余浮盈继续滚仓</li>
        </ul>
      </div>

      <div class="feature-card">
        <h3>⚙️ 参数配置</h3>
        <p>用户可调整的关键参数：</p>
        <ul>
          <li>滚仓触发浮盈比例：0.5-2.0</li>
          <li>杠杆递减系数：0.3-0.7</li>
          <li>每次落袋比例：30%-70%</li>
          <li>最低杠杆限制：3x-15x</li>
        </ul>
      </div>

      <div class="feature-card">
        <h3>📊 智能计算</h3>
        <p>自动计算和展示：</p>
        <ul>
          <li>动态杠杆滚仓路径表</li>
          <li>滚仓详情和触发条件</li>
          <li>浮盈和落袋利润统计</li>
          <li>本金保护和风险控制</li>
        </ul>
      </div>

      <div class="feature-card">
        <h3>🔒 风险控制</h3>
        <p>多重安全保障：</p>
        <ul>
          <li>本金安全：初期浮盈后抽回</li>
          <li>利润锁定：每次滚仓落袋部分</li>
          <li>杠杆递减：风险逐步降低</li>
          <li>止损保护：动态调整止损位</li>
        </ul>
      </div>
    </div>

    <div class="highlight">
      <h3>🧮 算法示例</h3>
      <p>测试参数：本金200U，初始杠杆50x，价格4700→5200U</p>
      <div class="code-example">
        总收益: 3.31 U<br>
        最终账户: 403.31 U<br>
        收益率: 1.66%<br>
        滚仓次数: 1<br>
        第1次滚仓: 触发价格4795U, 杠杆25x, 落袋1.06U
      </div>
    </div>

    <a href="rollup-calculator.html" class="demo-link">
      🚀 体验动态杠杆滚仓计算器
    </a>

    <div class="highlight">
      <h3>📚 技术实现</h3>
      <p>基于rolling-v1.md文档的simulateDynamicPyramid函数，实现了完整的动态杠杆滚仓策略：</p>
      <ul>
        <li>价格线性增长模拟（100步）</li>
        <li>浮盈触发机制判断</li>
        <li>本金抽回和利润落袋</li>
        <li>杠杆递减和仓位重置</li>
        <li>实时计算和结果展示</li>
      </ul>
    </div>
  </div>
</body>

</html>