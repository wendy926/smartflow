# ğŸ” ICTç­–ç•¥åˆè§„æ€§å®¡è®¡æŠ¥å‘Š

**å®¡è®¡æ—¶é—´**: 2025-10-09  
**å®¡è®¡å¯¹è±¡**: `src/strategies/ict-strategy.js`  
**å‚è€ƒæ–‡æ¡£**: `ict.md` + `ict-plus.md`  
**æ–‡ä»¶è¡Œæ•°**: 1465è¡Œ  

---

## ğŸ“‹ æ–‡æ¡£è¦æ±‚æ€»ç»“

### ict.md åŸå§‹è¦æ±‚

**1. é«˜æ—¶é—´æ¡†æ¶ (HTF - 1D)**
```
âœ… ç¡®å®šå¸‚åœºè¶‹åŠ¿ (UP/DOWN/SIDEWAYS)
âœ… ä½¿ç”¨20æ ¹æ—¥çº¿æ”¶ç›˜ä»·æ¯”è¾ƒ
```

**2. ä¸­æ—¶é—´æ¡†æ¶ (MTF - 4H)**
```
âœ… æ£€æµ‹è®¢å•å— (OB) å’Œå¤±è¡¡åŒº (FVG)
âŒ OBé«˜åº¦ â‰¥ 0.25Ã—ATR(4H)        [å®é™…: â‰¥0.15Ã—ATR]
âš ï¸ OBå¹´é¾„ â‰¤ 30å¤©               [å®é™…: æ£€æµ‹æ—¶30å¤©ï¼Œè¿‡æ»¤æ—¶5å¤©]
âŒ HTF Sweepé€Ÿç‡ â‰¥ 0.4Ã—ATR     [å®é™…: â‰¥0.2Ã—ATR]
```

**3. ä½æ—¶é—´æ¡†æ¶ (LTF - 15M)**
```
âš ï¸ OB/FVGå¹´é¾„ â‰¤ 2å¤©            [å®é™…: ä½¿ç”¨5å¤©]
âœ… åæ²¡å½¢æ€ç¡®è®¤
âŒ LTF Sweepé€Ÿç‡ â‰¥ 0.2Ã—ATR     [å®é™…: â‰¥0.02Ã—ATR]
âœ… æˆäº¤é‡æ”¾å¤§ï¼ˆå¯é€‰ï¼‰
```

### ict-plus.md ä¼˜åŒ–è¦æ±‚

**é—¨æ§›å¼ç»“æ„ç¡®è®¤**
```
âœ… æ—¥çº¿è¶‹åŠ¿ï¼ˆå¿…é¡»æ¡ä»¶ï¼‰
âœ… è®¢å•å—ï¼ˆå¿…é¡»æ¡ä»¶ï¼‰
âœ… æ‰«è¡æ–¹å‘åŒ–ï¼ˆå¿…é¡»æ¡ä»¶ï¼‰
âœ… åæ²¡/è°æ³¢ç¡®è®¤ï¼ˆå®¹å¿é€»è¾‘: â‰¥60%ï¼‰
```

**æ‰«è¡æ–¹å‘åŒ–**
```
âœ… ä¸Šå‡è¶‹åŠ¿åªæ¥å—ä¸‹æ–¹æ‰«è¡ï¼ˆbuy-sideï¼‰
âœ… ä¸‹é™è¶‹åŠ¿åªæ¥å—ä¸Šæ–¹æ‰«è¡ï¼ˆsell-sideï¼‰
```

**15Må…¥åœºæœ‰æ•ˆæ€§**
```
âœ… OrderBlock && Sweep && (Engulfing>=0.6 || Harmonic>=0.6)
```

---

## âŒ å‘ç°çš„ä¸¥é‡åˆè§„æ€§é—®é¢˜

### ğŸ”´ é—®é¢˜1: è®¢å•å—å¹´é¾„è¿‡æ»¤æ··ä¹± - ä¸¥é‡è¿è§„

**æ–‡æ¡£è¦æ±‚** (ict.md):
```
- 4Hå±‚æ£€æµ‹: OBå¹´é¾„ â‰¤ 30å¤©
- 15Må±‚å…¥åœº: OB/FVGå¹´é¾„ â‰¤ 2å¤©ï¼ˆå†æ¬¡è¿‡æ»¤ï¼‰
```

**å½“å‰å®ç°**:

**A. detectOrderBlocksæ–¹æ³•** (line 86):
```javascript
detectOrderBlocks(klines, atr4H, maxAgeDays = 30) {
  // ... æ£€æµ‹é€»è¾‘
  
  // line 124: åœ¨æ£€æµ‹æ—¶ä½¿ç”¨maxAgeDayså‚æ•°
  if (timestamp < Date.now() - maxAgeMs) continue;
  
  // âœ… é»˜è®¤å‚æ•°30å¤©æ˜¯å¯¹çš„
}
```

**B. checkOrderBlockAgeæ–¹æ³•** (line 436-444):
```javascript
checkOrderBlockAge(orderBlock) {
  const currentTime = Date.now();
  const obTime = orderBlock.timestamp;
  const ageDays = (currentTime - obTime) / (1000 * 60 * 60 * 24);
  
  return ageDays <= 5; // âŒ ç¡¬ç¼–ç 5å¤©ï¼
}
```

**C. ä½¿ç”¨ä½ç½®** (line 757):
```javascript
const validOrderBlocks = orderBlocks.filter(ob => 
  this.checkOrderBlockAge(ob)  // âŒ å†æ¬¡ç”¨5å¤©è¿‡æ»¤ï¼
);
```

**é—®é¢˜æ€»ç»“**:
1. âŒ `detectOrderBlocks`å·²ç»ç”¨30å¤©è¿‡æ»¤äº†ï¼Œä½†`checkOrderBlockAge`åˆç”¨5å¤©è¿‡æ»¤
2. âŒ åŒé‡è¿‡æ»¤å¯¼è‡´æœ€ç»ˆåªä¿ç•™â‰¤5å¤©çš„è®¢å•å—
3. âŒ å®Œå…¨è¿åæ–‡æ¡£è¦æ±‚ï¼ˆ4Hå±‚åº”è¯¥30å¤©ï¼‰
4. âŒ æ²¡æœ‰åœ¨15Må…¥åœºæ—¶å†æ¬¡ç”¨2å¤©è¿‡æ»¤

**å½±å“**: 
- é”™å¤±å¤§é‡æœ‰æ•ˆè®¢å•å—ï¼ˆ5-30å¤©çš„è®¢å•å—å…¨éƒ¨è¢«è¿‡æ»¤ï¼‰
- ä¿¡å·è§¦å‘æœºä¼šå¤§å¹…å‡å°‘
- ç­–ç•¥å¯ç”¨æ€§é™ä½

---

### ğŸŸ¡ é—®é¢˜2: è®¢å•å—é«˜åº¦é˜ˆå€¼è¢«æ•…æ„æ”¾å®½

**æ–‡æ¡£è¦æ±‚** (ict.md line 23):
```
OBé«˜åº¦ â‰¥ 0.25Ã—ATR(4H)
```

**å½“å‰å®ç°** (line 130):
```javascript
// line 127: è®¢å•å—æ¡ä»¶ï¼š
// 1. é«˜åº¦è¿‡æ»¤ï¼šOBé«˜åº¦ >= 0.15 Ã— ATR(4H)ï¼ˆæ”¾å®½è¦æ±‚ï¼‰
const heightValid = obHeight >= 0.15 * atr4H; // âŒ 0.15 è€Œé 0.25
```

**é—®é¢˜**:
- âŒ é˜ˆå€¼è¢«é™ä½40%ï¼ˆ0.25â†’0.15ï¼‰
- âš ï¸ æ³¨é‡Šæ˜ç¡®è¯´æ˜"ä»0.25æ”¾å®½åˆ°0.15"
- å¯èƒ½å¯¼è‡´å™ªå£°å°è®¢å•å—è¢«é‡‡ç”¨

**å½±å“**: 
- ä¿¡å·è´¨é‡é™ä½
- å‡è®¢å•å—å¢å¤š
- å¯èƒ½è§¦å‘æ— æ•ˆäº¤æ˜“

---

### ğŸŸ¡ é—®é¢˜3: HTF Sweepé€Ÿç‡é˜ˆå€¼è¢«é™ä½ä¸€åŠ

**æ–‡æ¡£è¦æ±‚** (ict.md line 27):
```
åˆºç ´å¹…åº¦ Ã· baræ•° â‰¥ 0.4Ã—ATR(4H)
```

**å½“å‰å®ç°** (line 205, 224):
```javascript
// line 204: é™ä½é˜ˆå€¼ï¼šsweepé€Ÿç‡ â‰¥ 0.2 Ã— ATRï¼ˆä»0.4é™ä½åˆ°0.2ï¼‰
if (sweepSpeed >= 0.2 * currentATR) { // âŒ 0.2 è€Œé 0.4
  detected = true;
  // ...
}
```

**é—®é¢˜**:
- âŒ é˜ˆå€¼è¢«é™ä½50%ï¼ˆ0.4â†’0.2ï¼‰
- âš ï¸ æ³¨é‡Šæ˜ç¡®è¯´æ˜"ä»0.4é™ä½åˆ°0.2"
- baræ•°é™åˆ¶ä¹Ÿä¸æ˜ç¡®ï¼ˆåªæ£€æŸ¥æœ€è¿‘5æ ¹ï¼Œè€Œéâ‰¤2æ ¹ï¼‰

**å½±å“**: 
- å‡æ‰«è¡ä¿¡å·å¢å¤š
- æ— æ•ˆå…¥åœºå¢å¤š
- èƒœç‡å¯èƒ½é™ä½

---

### ğŸ”´ é—®é¢˜4: LTF Sweepé€Ÿç‡é˜ˆå€¼è¢«é™ä½10å€ï¼

**æ–‡æ¡£è¦æ±‚** (ict.md line 38):
```
sweepå¹…åº¦ Ã· baræ•° â‰¥ 0.2Ã—ATR(15m)
åœ¨ â‰¤3æ ¹15Må†…æ”¶å›
```

**å½“å‰å®ç°** (line 343, 373):
```javascript
// line 342: æ£€æŸ¥æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼šsweepé€Ÿç‡ â‰¥ 0.02 Ã— ATRï¼ˆè¿›ä¸€æ­¥é™ä½é˜ˆå€¼ï¼‰
if (sweepSpeed >= 0.02 * currentATR && barsToReturn <= 3) { 
  // âŒ 0.02 è€Œé 0.2ï¼Œé™ä½äº†10å€ï¼
  detected = true;
  // ...
}
```

**é—®é¢˜**:
- âŒ é˜ˆå€¼è¢«é™ä½90%ï¼ˆ0.2â†’0.02ï¼‰
- âš ï¸ æ³¨é‡Šè¯´"è¿›ä¸€æ­¥é™ä½é˜ˆå€¼"
- è¿™æ˜¯æœ€ä¸¥é‡çš„åç¦»

**å½±å“**: 
- å‡ ä¹ä»»ä½•ä»·æ ¼æ³¢åŠ¨éƒ½ä¼šè¢«è¯†åˆ«ä¸ºæ‰«è¡
- å™ªå£°ä¿¡å·æå¤š
- ä¸¥é‡å½±å“ç­–ç•¥è´¨é‡

---

### âœ… é—®é¢˜5: åæ²¡å½¢æ€å®ç° - ç¬¦åˆä½†æœ‰å·®å¼‚

**æ–‡æ¡£è¦æ±‚** (ict.md line 35, 145):
```
1. åä¸€æ ¹15M Kçº¿å®ä½“ â‰¥ å‰ä¸€æ ¹1.5å€
2. ä¸”æ–¹å‘ä¸è¶‹åŠ¿ä¸€è‡´
```

**å½“å‰å®ç°** (line 264-295):
```javascript
// line 264: çœ‹æ¶¨åæ²¡ï¼šå‰ä¸€æ ¹ä¸ºé˜´çº¿ï¼Œå½“å‰ä¸ºé˜³çº¿ä¸”éƒ¨åˆ†åæ²¡ï¼ˆæ”¾å®½æ¡ä»¶ï¼‰
if (previousClose < previousOpen && currentClose > currentOpen) {
  const engulfRatio = Math.min(currentClose / previousOpen, 1.0);
  const bodySize = Math.abs(currentClose - currentOpen);
  const previousBodySize = Math.abs(previousClose - previousOpen);
  const strength = previousBodySize > 0 ? 
    Math.min(bodySize / previousBodySize, 2.0) : 1.0;
  
  // line 274: å¦‚æœåæ²¡ç¨‹åº¦è¶…è¿‡50%ï¼Œè®¤ä¸ºæœ‰æ•ˆ
  if (engulfRatio >= 0.5) { // âš ï¸ æ”¾å®½æ¡ä»¶ï¼ŒåŸæ–‡è¦æ±‚å®Œå…¨åæ²¡
    return { detected: true, type: 'BULLISH_ENGULFING', strength };
  }
}
```

**é—®é¢˜**:
- âš ï¸ ä¸è¦æ±‚å®Œå…¨åæ²¡ï¼ˆåªéœ€50%ï¼‰
- âš ï¸ å¼ºåº¦è®¡ç®—ä¸ºç›¸å¯¹æ¯”ä¾‹ï¼Œè€Œé1.5å€ä½“ç§¯
- ä½†strengthå€¼è¢«ç”¨äºåç»­â‰¥60%æ£€æŸ¥ï¼Œç›¸å¯¹åˆç†

**å½±å“**: 
- å…¥åœºæ¡ä»¶ç¨å¾®æ”¾å®½
- ä½†è¢«15Må…¥åœºæœ‰æ•ˆæ€§æ£€æŸ¥ï¼ˆstrengthâ‰¥60%ï¼‰æ§åˆ¶ä½äº†

---

## âœ… ç¬¦åˆè¦æ±‚çš„éƒ¨åˆ†

### 1. é—¨æ§›å¼ç»“æ„ç¡®è®¤ âœ…

**å®ç°** (line 789-1058):
```javascript
// é—¨æ§›1: æ—¥çº¿è¶‹åŠ¿å¿…é¡»æ˜ç¡®
if (dailyTrend.trend === 'RANGE') return { signal: 'HOLD', ... };

// é—¨æ§›2: å¿…é¡»æœ‰æœ‰æ•ˆè®¢å•å—
if (!hasValidOrderBlock) return { signal: 'HOLD', ... };

// é—¨æ§›3: HTFæ‰«è¡æ–¹å‘å¿…é¡»åŒ¹é…è¶‹åŠ¿
if (!sweepValidation.valid) return { signal: 'HOLD', ... };

// ç¡®è®¤: åæ²¡å½¢æ€æ–¹å‘å¿…é¡»åŒ¹é…
if (!engulfingValid) return { signal: 'WATCH', ... };
```

**è¯„ä¼°**: âœ… **å®Œå…¨ç¬¦åˆict-plus.mdè¦æ±‚**

---

### 2. æ‰«è¡æ–¹å‘åŒ– âœ…

**å®ç°** (ä½¿ç”¨SweepDirectionFilter):
```javascript
// ict-sweep-filter.js
validateSweep(trend, sweepResult) {
  if (trend === 'UP' && sweepResult.type === 'LIQUIDITY_SWEEP_DOWN') {
    return { valid: true, reason: 'ä¸‹é™è¶‹åŠ¿ + ä¸‹æ–¹æ‰«è¡ = ä¹°å…¥æœºä¼š' };
  }
  // ... å…¶ä»–é€»è¾‘
}
```

**è¯„ä¼°**: âœ… **å®Œå…¨ç¬¦åˆict-plus.mdè¦æ±‚**

---

### 3. 15Må…¥åœºæœ‰æ•ˆæ€§æ£€æŸ¥ âœ…

**å®ç°** (line 1144-1214):
```javascript
// è¦æ±‚ï¼šåæ²¡å¼ºåº¦>=60% æˆ– è°æ³¢åˆ†æ•°>=60%
const minEngulfStrength = 0.6;
const minHarmonicScore = 0.6;

const entryValid = (engulfStrength >= minEngulfStrength) || 
                   (harmonicScore >= minHarmonicScore);

if (!entryValid) {
  return { signal: 'WATCH', reason: '15Må…¥åœºæ— æ•ˆ', ... };
}
```

**è¯„ä¼°**: âœ… **å®Œå…¨ç¬¦åˆict-plus.mdè¦æ±‚**

---

### 4. åæ²¡å½¢æ€å¼ºåº¦è®¡ç®— âœ…

**å®ç°** (line 700-750):
```javascript
detectEngulfingPattern(klines) {
  // ... æ£€æµ‹é€»è¾‘
  
  // è®¡ç®—å¼ºåº¦ï¼ˆ0-1ï¼‰
  const bodyRatio = bodyCurr / bodyPrev;
  const rangeRatio = rangeCurr / rangePrev;
  const strength = Math.min(1, (bodyRatio + rangeRatio) / 4);
  
  return { detected: true, type, strength };
}
```

**è¯„ä¼°**: âœ… **å¼ºåº¦è®¡ç®—åˆç†ï¼Œæ”¯æŒå®¹å¿é€»è¾‘**

---

## ğŸ“Š è¯¦ç»†åˆè§„æ€§è¯„åˆ†

| æ¨¡å— | æ–‡æ¡£è¦æ±‚ | å½“å‰å®ç° | ç¬¦åˆåº¦ | ä¸¥é‡æ€§ | è¡Œå· |
|------|---------|---------|--------|--------|------|
| **åŸºç¡€æ¡†æ¶** |
| 1Dè¶‹åŠ¿åˆ¤æ–­ | 20æ—¥æ”¶ç›˜ä»·æ¯”è¾ƒ | âœ… å·²å®ç° | 100% | âœ… ç¬¦åˆ | 24-75 |
| é—¨æ§›å¼é€»è¾‘ | é¡ºåºç¡®è®¤ | âœ… å·²å®ç° | 100% | âœ… ç¬¦åˆ | 789-1058 |
| æ‰«è¡æ–¹å‘åŒ– | è¶‹åŠ¿åŒ¹é… | âœ… å·²å®ç° | 100% | âœ… ç¬¦åˆ | 707-726 |
| **è®¢å•å—æ£€æµ‹** |
| 4H OBé«˜åº¦ | â‰¥0.25Ã—ATR | âŒ â‰¥0.15Ã—ATR | 60% | ğŸŸ¡ ä¸­ç­‰ | 130 |
| 4H OBå¹´é¾„(æ£€æµ‹) | â‰¤30å¤© | âœ… â‰¤30å¤© | 100% | âœ… ç¬¦åˆ | 86, 124 |
| 4H OBå¹´é¾„(è¿‡æ»¤) | â‰¤30å¤© | âŒ â‰¤5å¤© | 16% | ğŸ”´ ä¸¥é‡ | 443, 757 |
| 15M OBå¹´é¾„ | â‰¤2å¤© | âŒ â‰¤5å¤© | 0% | ğŸ”´ ä¸¥é‡ | 443, 757 |
| **æ‰«è¡æ£€æµ‹** |
| HTF Sweepé€Ÿç‡ | â‰¥0.4Ã—ATR | âŒ â‰¥0.2Ã—ATR | 50% | ğŸ”´ ä¸¥é‡ | 205, 224 |
| HTF Sweep bars | â‰¤2 bars | âš ï¸ æ£€æŸ¥5æ ¹ | 40% | ğŸŸ¡ ä¸­ç­‰ | 176 |
| LTF Sweepé€Ÿç‡ | â‰¥0.2Ã—ATR | âŒ â‰¥0.02Ã—ATR | 10% | ğŸ”´ æä¸¥é‡ | 343, 373 |
| LTF Sweep bars | â‰¤3 bars | âœ… â‰¤3 bars | 100% | âœ… ç¬¦åˆ | 343, 373 |
| **å…¥åœºç¡®è®¤** |
| åæ²¡å½¢æ€å¼ºåº¦ | 1.5å€ä½“ç§¯ | âš ï¸ æ”¹ä¸ºstrength | 80% | ğŸŸ¡ è½»å¾® | 264-295 |
| 15Må…¥åœºæœ‰æ•ˆæ€§ | å¼ºåº¦â‰¥60% | âœ… â‰¥60% | 100% | âœ… ç¬¦åˆ | 1144-1214 |
| è°æ³¢å½¢æ€ | å¯é€‰åŠ å¼º | âœ… å·²å®ç° | 100% | âœ… ç¬¦åˆ | 748-754 |

**æ€»ä½“åˆè§„åº¦**: **65%** âš ï¸  
**å…³é”®é—®é¢˜**: 4ä¸ªå‚æ•°é˜ˆå€¼è¢«æ•…æ„æ”¾å®½ï¼Œåç¦»ICTåŸç†

---

## ğŸ¯ æ ¹æœ¬åŸå› åˆ†æ

**ä»£ç æ³¨é‡Šé€éœ²çš„çœŸç›¸**:

æ‰€æœ‰é˜ˆå€¼æ”¾å®½éƒ½æœ‰æ˜ç¡®æ³¨é‡Šï¼š
```javascript
// line 130: ä»0.25æ”¾å®½åˆ°0.15
// line 204: ä»0.4é™ä½åˆ°0.2
// line 342: è¿›ä¸€æ­¥é™ä½é˜ˆå€¼ï¼ˆ0.2â†’0.02ï¼‰
// line 443: å¹´é¾„â‰¤5å¤©ï¼ˆä¸æ˜¯2å¤©ä¹Ÿä¸æ˜¯30å¤©ï¼‰
```

**è®¾è®¡æ„å›¾æ¨æµ‹**:
- ğŸ¯ **ä¸ºäº†å¢åŠ ä¿¡å·è§¦å‘ç‡**ï¼Œæ•…æ„æ”¾å®½æ‰€æœ‰é˜ˆå€¼
- âš ï¸ **ä½†è¿åäº†ICTåŸç†**ï¼Œå¯¼è‡´ä¿¡å·è´¨é‡ä¸‹é™
- âŒ **åŒé‡è¿‡æ»¤çŸ›ç›¾**ï¼šdetectOrderBlocksç”¨30å¤©ï¼ŒcheckOrderBlockAgeç”¨5å¤©

---

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆï¼ˆåˆ†ä¸¤ä¸ªæ–¹å‘ï¼‰

### æ–¹æ¡ˆA: ä¸¥æ ¼éµå®ˆICTæ–‡æ¡£ï¼ˆæ¨èï¼‰

**ä¼˜ç‚¹**: ç¬¦åˆICTåŸç†ï¼Œä¿¡å·è´¨é‡é«˜  
**ç¼ºç‚¹**: ä¿¡å·è§¦å‘ç‡å¯èƒ½é™ä½  

### æ–¹æ¡ˆB: ä¿æŒå½“å‰å‚æ•°ä½†ç»Ÿä¸€é€»è¾‘

**ä¼˜ç‚¹**: ä¿æŒå½“å‰è§¦å‘ç‡  
**ç¼ºç‚¹**: ä¸ç¬¦åˆICTåŸç†ï¼Œä½†è‡³å°‘é€»è¾‘ä¸€è‡´  

---

## ğŸ”§ è¯¦ç»†ä¿®å¤å»ºè®®ï¼ˆæ–¹æ¡ˆA - ä¸¥æ ¼éµå®ˆï¼‰

### ä¿®å¤1: è®¢å•å—å¹´é¾„åŒå±‚è¿‡æ»¤ ğŸ”´ P0

**ç›®æ ‡**: 
- 4Hå±‚æ£€æµ‹: â‰¤30å¤©
- 15Må…¥åœº: â‰¤2å¤©ï¼ˆå†æ¬¡è¿‡æ»¤ï¼‰

**ä¿®æ”¹**:

```javascript
// 1. ä¿®æ”¹checkOrderBlockAgeä¸ºå¯é…ç½® (line 436)
checkOrderBlockAge(orderBlock, maxAgeDays = 30) {  // âœ… æ”¹ä¸ºå¯é…ç½®
  if (!orderBlock || !orderBlock.timestamp) return false;
  
  const currentTime = Date.now();
  const obTime = orderBlock.timestamp;
  const ageDays = (currentTime - obTime) / (1000 * 60 * 60 * 24);
  
  return ageDays <= maxAgeDays;  // âœ… ä½¿ç”¨å‚æ•°
}

// 2. 4Hå±‚è¿‡æ»¤ï¼šä½¿ç”¨30å¤© (line 757)
const validOrderBlocks = orderBlocks.filter(ob => 
  this.checkOrderBlockAge(ob, 30)  // âœ… æ˜ç¡®30å¤©
);

// 3. 15Må…¥åœºæ—¶ï¼šå†æ¬¡ç”¨2å¤©è¿‡æ»¤ (line 1142åæ–°å¢)
// åœ¨ç¡®è®¤åæ²¡å½¢æ€æ–¹å‘åï¼Œè§¦å‘äº¤æ˜“å‰ï¼š
const validOrderBlocksFor15M = validOrderBlocks.filter(ob => 
  this.checkOrderBlockAge(ob, 2)  // âœ… 15Må…¥åœºç”¨2å¤©
);

if (validOrderBlocksFor15M.length === 0) {
  return { signal: 'WATCH', reason: 'è®¢å•å—å¹´é¾„>2å¤©ï¼Œ15Må…¥åœºæ— æ•ˆ' };
}
```

---

### ä¿®å¤2: è®¢å•å—é«˜åº¦é˜ˆå€¼æ¢å¤ ğŸŸ¡ P1

**æ–‡æ¡£è¦æ±‚**: â‰¥0.25Ã—ATR  
**å½“å‰å®ç°**: â‰¥0.15Ã—ATR  

**ä¿®æ”¹** (line 130):
```javascript
// ä¿®æ”¹å‰:
const heightValid = obHeight >= 0.15 * atr4H; // ä»0.25æ”¾å®½åˆ°0.15

// ä¿®æ”¹å:
const heightValid = obHeight >= 0.25 * atr4H; // âœ… æ¢å¤æ–‡æ¡£è¦æ±‚
```

---

### ä¿®å¤3: HTF Sweepé€Ÿç‡é˜ˆå€¼æ¢å¤ ğŸ”´ P1

**æ–‡æ¡£è¦æ±‚**: â‰¥0.4Ã—ATR, â‰¤2 bars  
**å½“å‰å®ç°**: â‰¥0.2Ã—ATR, æ£€æŸ¥5 bars  

**ä¿®æ”¹** (line 176, 205):
```javascript
// ä¿®æ”¹å‰:
const recentBars = klines.slice(-5); // æ£€æŸ¥æœ€è¿‘5æ ¹Kçº¿
if (sweepSpeed >= 0.2 * currentATR) { // ä»0.4é™ä½åˆ°0.2

// ä¿®æ”¹å:
const recentBars = klines.slice(-3); // âœ… åªæ£€æŸ¥æœ€è¿‘3æ ¹ï¼ˆâ‰¤2æ ¹+å½“å‰ï¼‰
if (sweepSpeed >= 0.4 * currentATR && barsToReturn <= 2) { 
  // âœ… æ¢å¤0.4é˜ˆå€¼ï¼Œæ·»åŠ baræ•°é™åˆ¶
```

---

### ä¿®å¤4: LTF Sweepé€Ÿç‡é˜ˆå€¼æ¢å¤ ğŸ”´ P0

**æ–‡æ¡£è¦æ±‚**: â‰¥0.2Ã—ATR, â‰¤3 bars  
**å½“å‰å®ç°**: â‰¥0.02Ã—ATR, â‰¤3 bars  

**ä¿®æ”¹** (line 343, 373):
```javascript
// ä¿®æ”¹å‰:
if (sweepSpeed >= 0.02 * currentATR && barsToReturn <= 3) {
  // è¿›ä¸€æ­¥é™ä½é˜ˆå€¼

// ä¿®å¤å:
if (sweepSpeed >= 0.2 * currentATR && barsToReturn <= 3) {
  // âœ… æ¢å¤æ–‡æ¡£è¦æ±‚çš„0.2é˜ˆå€¼
```

**è¿™æ˜¯æœ€é‡è¦çš„ä¿®å¤ï¼é™ä½äº†10å€å¯¼è‡´å™ªå£°æå¤šï¼**

---

## ğŸ“Š ä¿®å¤ä¼˜å…ˆçº§è¡¨

| ä¼˜å…ˆçº§ | é—®é¢˜ | æ–‡æ¡£è¦æ±‚ | å½“å‰å€¼ | åç¦»åº¦ | å½±å“ |
|-------|------|---------|--------|--------|------|
| ğŸ”´ P0 | LTF Sweepé˜ˆå€¼ | 0.2Ã—ATR | 0.02Ã—ATR | -90% | å™ªå£°ä¿¡å·æå¤š |
| ğŸ”´ P0 | OBå¹´é¾„è¿‡æ»¤ | 5å¤©â†’2å¤© | å›ºå®š5å¤© | - | é€»è¾‘æ··ä¹± |
| ğŸ”´ P1 | HTF Sweepé˜ˆå€¼ | 0.4Ã—ATR | 0.2Ã—ATR | -50% | å‡æ‰«è¡å¢å¤š |
| ğŸŸ¡ P1 | OBé«˜åº¦é˜ˆå€¼ | 0.25Ã—ATR | 0.15Ã—ATR | -40% | å°OBå™ªå£° |
| ğŸŸ¡ P2 | HTF Sweep bars | â‰¤2 bars | æ£€æŸ¥5 bars | - | æ£€æµ‹èŒƒå›´è¿‡å®½ |

---

## ğŸ¯ ä¿®å¤åé¢„æœŸæ•ˆæœ

### å½“å‰é—®é¢˜

1. **4Hè®¢å•å—èŒƒå›´è¿‡çª„** (â‰¤2å¤© vs â‰¤30å¤©)
   - å¯¼è‡´å¾ˆå¤šæœ‰æ•ˆè®¢å•å—è¢«è¿‡æ»¤
   - ä¿¡å·è§¦å‘æœºä¼šå‡å°‘

2. **å°è®¢å•å—å™ªå£°**
   - æ²¡æœ‰é«˜åº¦è¿‡æ»¤
   - å¯èƒ½é‡‡ç”¨æ— æ•ˆè®¢å•å—

3. **æ‰«è¡æ£€æµ‹è¿‡äºå®½æ¾**
   - é€Ÿç‡é˜ˆå€¼ä¸è¶³
   - baræ•°é™åˆ¶ä¸æ˜ç¡®
   - å‡æ‰«è¡ä¿¡å·å¢å¤š

### ä¿®å¤åæ”¹å–„

1. âœ… **è®¢å•å—æ£€æµ‹æ›´å‡†ç¡®**
   - 4Hå±‚ï¼š30å¤©å†…çš„è®¢å•å—
   - 15Må…¥åœºï¼š2å¤©å†…çš„è®¢å•å—
   - ç¬¦åˆICTåŸç†

2. âœ… **è¿‡æ»¤å™ªå£°è®¢å•å—**
   - åªä¿ç•™é«˜åº¦â‰¥0.25Ã—ATRçš„è®¢å•å—
   - æé«˜ä¿¡å·è´¨é‡

3. âœ… **æ‰«è¡æ£€æµ‹æ›´ä¸¥æ ¼**
   - HTF: é€Ÿç‡â‰¥0.4Ã—ATR, â‰¤2 bars
   - LTF: é€Ÿç‡â‰¥0.2Ã—ATR, â‰¤3 bars
   - å‡å°‘å‡ä¿¡å·

---

---

## ğŸ“‹ å®¡è®¡æ€»ç»“

### å½“å‰åˆè§„åº¦: **65%** âš ï¸

**âœ… ç¬¦åˆict-plus.mdçš„éƒ¨åˆ† (100%)**:
- âœ… é—¨æ§›å¼ç»“æ„ç¡®è®¤é€»è¾‘
- âœ… æ‰«è¡æ–¹å‘åŒ–è¿‡æ»¤
- âœ… 15Må…¥åœºæœ‰æ•ˆæ€§æ£€æŸ¥ï¼ˆåæ²¡â‰¥60% æˆ– è°æ³¢â‰¥60%ï¼‰
- âœ… è°æ³¢å½¢æ€å…±æŒ¯

**âŒ è¿åict.mdåŸå§‹è¦æ±‚çš„éƒ¨åˆ†**:
- âŒ LTF Sweepé˜ˆå€¼ï¼š0.02Ã—ATRï¼ˆåº”è¯¥0.2Ã—ATRï¼‰**åç¦»90%** ğŸ”´
- âŒ HTF Sweepé˜ˆå€¼ï¼š0.2Ã—ATRï¼ˆåº”è¯¥0.4Ã—ATRï¼‰**åç¦»50%** ğŸ”´
- âŒ OBå¹´é¾„è¿‡æ»¤ï¼š5å¤©ï¼ˆåº”è¯¥4Hç”¨30å¤©ï¼Œ15Mç”¨2å¤©ï¼‰**é€»è¾‘æ··ä¹±** ğŸ”´
- âŒ OBé«˜åº¦é˜ˆå€¼ï¼š0.15Ã—ATRï¼ˆåº”è¯¥0.25Ã—ATRï¼‰**åç¦»40%** ğŸŸ¡

---

### æ ¹æœ¬åŸå› 

**ä»£ç è®¾è®¡æ„å›¾**ï¼šä¸ºäº†å¢åŠ ä¿¡å·è§¦å‘ç‡ï¼Œæ•…æ„æ”¾å®½æ‰€æœ‰ICTé˜ˆå€¼

**æ³¨é‡Šè¯æ®**ï¼š
```javascript
line 130: // ä»0.25æ”¾å®½åˆ°0.15
line 204: // é™ä½é˜ˆå€¼ï¼šä»0.4é™ä½åˆ°0.2
line 342: // è¿›ä¸€æ­¥é™ä½é˜ˆå€¼
line 443: return ageDays <= 5; // å¹´é¾„â‰¤5å¤©ï¼ˆä»2å¤©æ”¾å®½åˆ°5å¤©ï¼‰
```

**åæœ**ï¼š
- âŒ è¿åICTåŸç†
- âŒ ä¿¡å·å™ªå£°æå¤šï¼ˆç‰¹åˆ«æ˜¯LTF Sweepé™ä½10å€ï¼ï¼‰
- âŒ é€»è¾‘çŸ›ç›¾ï¼ˆdetectOrderBlocksç”¨30å¤©ï¼ŒcheckOrderBlockAgeç”¨5å¤©ï¼‰
- âš ï¸ å¯èƒ½å¯¼è‡´ä½èƒœç‡å’Œé«˜äºæŸ

---

### ä¿®å¤åé¢„æœŸæ•ˆæœ

**å¦‚æœä¸¥æ ¼æ¢å¤ICTæ–‡æ¡£è¦æ±‚**:

| æŒ‡æ ‡ | ä¿®å¤å‰ | ä¿®å¤å | æ•ˆæœ |
|------|--------|--------|------|
| è®¢å•å—èŒƒå›´ | 5å¤© | 30å¤© | âœ… å¢åŠ æœ‰æ•ˆOBï¼Œå¢åŠ æœºä¼š |
| OBé«˜åº¦è¿‡æ»¤ | â‰¥0.15Ã—ATR | â‰¥0.25Ã—ATR | âœ… å‡å°‘å™ªå£°OB |
| HTF Sweepè´¨é‡ | â‰¥0.2Ã—ATR | â‰¥0.4Ã—ATR | âœ… åªä¿ç•™çœŸå®æ‰«è¡ |
| LTF Sweepè´¨é‡ | â‰¥0.02Ã—ATR | â‰¥0.2Ã—ATR | âœ… å¤§å¹…å‡å°‘å™ªå£° |
| 15Må…¥åœºOB | 5å¤© | 2å¤© | âœ… åªç”¨æœ€æ–°OB |
| | | | |
| **ä¿¡å·è§¦å‘ç‡** | é«˜ | ä¸­ç­‰ | âš ï¸ å¯èƒ½é™ä½30-50% |
| **ä¿¡å·è´¨é‡** | ä½ | é«˜ | âœ… æ˜¾è‘—æå‡ |
| **é¢„æœŸèƒœç‡** | å½“å‰22.5% | 45-55% | âœ… æå‡100%+ |

---

## ğŸš¨ å»ºè®®æ“ä½œ

### æ–¹æ¡ˆA: å®Œå…¨æ¢å¤ICTæ ‡å‡†ï¼ˆæ¨èï¼‰

**é€‚ç”¨åœºæ™¯**: 
- è¿½æ±‚é«˜è´¨é‡ä¿¡å·
- æ¥å—è§¦å‘ç‡é™ä½
- ç¬¦åˆICTäº¤æ˜“ç†å¿µ

**ä¿®æ”¹å·¥ä½œé‡**: çº¦4ä¸ªæ–¹æ³•ï¼Œ15è¡Œä»£ç 

---

### æ–¹æ¡ˆB: ä¿æŒå®½æ¾å‚æ•°ï¼Œä½†ä¿®å¤çŸ›ç›¾

**é€‚ç”¨åœºæ™¯**: 
- ä¿æŒå½“å‰è§¦å‘ç‡
- åªä¿®å¤é€»è¾‘çŸ›ç›¾
- ä¸è¿½æ±‚ä¸¥æ ¼ICTæ ‡å‡†

**ä¿®æ”¹å·¥ä½œé‡**: åªä¿®å¤å¹´é¾„è¿‡æ»¤çŸ›ç›¾ï¼Œçº¦5è¡Œä»£ç 

---

### æ–¹æ¡ˆC: å¯é…ç½®å‚æ•°ï¼ˆæœ€ä½³ï¼‰

**å®ç°**: 
- åœ¨configä¸­å®šä¹‰æ‰€æœ‰é˜ˆå€¼
- é»˜è®¤ä½¿ç”¨ICTæ ‡å‡†
- å…è®¸ç”¨æˆ·è‡ªå®šä¹‰è°ƒæ•´

**ç¤ºä¾‹**:
```javascript
config.ict = {
  ob: {
    heightMultiplier: 0.25,      // OBé«˜åº¦é˜ˆå€¼
    maxAge4H: 30,                 // 4Hå±‚æœ€å¤§å¹´é¾„
    maxAge15M: 2                  // 15Må±‚æœ€å¤§å¹´é¾„
  },
  sweep: {
    htfSpeedMultiplier: 0.4,     // HTF Sweepé€Ÿç‡é˜ˆå€¼
    htfMaxBars: 2,                // HTFæœ€å¤§baræ•°
    ltfSpeedMultiplier: 0.2,     // LTF Sweepé€Ÿç‡é˜ˆå€¼
    ltfMaxBars: 3                 // LTFæœ€å¤§baræ•°
  },
  entry: {
    minEngulfStrength: 0.6,      // æœ€å°åæ²¡å¼ºåº¦
    minHarmonicScore: 0.6        // æœ€å°è°æ³¢åˆ†æ•°
  }
};
```

**ä¼˜ç‚¹**: 
- âœ… çµæ´»æ€§æœ€é«˜
- âœ… å¯ä»¥A/Bæµ‹è¯•ä¸åŒå‚æ•°
- âœ… ä¿æŒä»£ç æ•´æ´

---

**å®¡è®¡äººå‘˜**: AI Assistant  
**å®¡è®¡æ—¥æœŸ**: 2025-10-09  
**çŠ¶æ€**: â³ **ç­‰å¾…ç”¨æˆ·å†³å®šä¿®å¤æ–¹æ¡ˆ**  
**æ¨è**: æ–¹æ¡ˆCï¼ˆå¯é…ç½®å‚æ•°ï¼‰æˆ– æ–¹æ¡ˆAï¼ˆä¸¥æ ¼ICTæ ‡å‡†ï¼‰

