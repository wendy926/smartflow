[mysqld]
# 基础配置
port = 3306
socket = /var/run/mysqld/mysqld.sock
datadir = /var/lib/mysql
log-error = /var/log/mysql/error.log
pid-file = /var/run/mysqld/mysqld.pid

# 内存优化配置 - 针对1GB VPS
# InnoDB缓冲池 - 减少到64MB
innodb_buffer_pool_size = 64M
innodb_buffer_pool_instances = 1
innodb_buffer_pool_chunk_size = 64M

# InnoDB日志配置
innodb_log_file_size = 16M
innodb_log_files_in_group = 2
innodb_log_buffer_size = 8M

# 连接配置
max_connections = 20
max_connect_errors = 1000
connect_timeout = 10
wait_timeout = 28800
interactive_timeout = 28800

# 查询缓存 - 关闭以节省内存
query_cache_type = 0
query_cache_size = 0

# 临时表配置
tmp_table_size = 8M
max_heap_table_size = 8M

# 排序和连接缓冲区
sort_buffer_size = 128K
read_buffer_size = 64K
read_rnd_buffer_size = 128K
join_buffer_size = 128K

# MyISAM配置
key_buffer_size = 8M
myisam_sort_buffer_size = 4M

# 其他优化
table_open_cache = 64
thread_cache_size = 4
thread_stack = 192K

# 性能模式 - 关闭以节省内存
performance_schema = OFF

# 慢查询日志 - 关闭
slow_query_log = 0

# 二进制日志 - 关闭
log_bin = OFF

# 错误日志级别
log_error_verbosity = 1

# 字符集
character_set_server = utf8mb4
collation_server = utf8mb4_unicode_ci

# 时区
default_time_zone = '+8:00'

# 安全配置
local_infile = 0
