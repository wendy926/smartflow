# VPSå†…å­˜ä¼˜åŒ–å®ŒæˆæŠ¥å‘Š

**æ—¥æœŸ**: 2025-10-26  
**é—®é¢˜**: VPSå†…å­˜ä½¿ç”¨100%ï¼Œå·²é‡å¯å®ä¾‹  
**è§£å†³æ–¹æ¡ˆ**: ä¿®å¤å†…å­˜æ³„æ¼ï¼Œä¼˜åŒ–å†…å­˜å ç”¨

---

## âœ… å®Œæˆçš„å·¥ä½œ

### 1. ä»£ç æ›´æ–°åˆ°VPS âœ…
- âœ… æ‹‰å–æœ€æ–°ä»£ç åˆ°VPS
- âœ… ç¾è‚¡ç­–ç•¥æ¨¡å—å·²æ›´æ–°
- âœ… å†…å­˜æ³„æ¼ä¿®å¤å·²åº”ç”¨

### 2. é‡å¯åŠ å¯†è´§å¸æœåŠ¡ âœ…
- âœ… main-app: WebæœåŠ¡
- âœ… strategy-worker: ç­–ç•¥æ‰§è¡Œå™¨
- âœ… data-cleaner: æ•°æ®æ¸…ç†æœåŠ¡
- âœ… è®¾ç½®å†…å­˜é™åˆ¶ï¼ˆè¶…è¿‡è‡ªåŠ¨é‡å¯ï¼‰

### 3. å†…å­˜ä¼˜åŒ–é…ç½® âœ…
```bash
# PM2å†…å­˜é™åˆ¶è®¾ç½®
main-app: 150Mé™åˆ¶
strategy-worker: 100Mé™åˆ¶
data-cleaner: 50Mé™åˆ¶
```

---

## ğŸ“Š å½“å‰VPSçŠ¶æ€

### ç³»ç»Ÿå†…å­˜
```bash
æ€»å†…å­˜: 1.6Gi
å·²ä½¿ç”¨: 717Mi (44.8%)
å¯ç”¨: 895Mi (55.2%)
```

### PM2è¿›ç¨‹çŠ¶æ€
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name             â”‚ status â”‚ uptime  â”‚ memory   â”‚ cpu      â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ main-app         â”‚ online â”‚ 45s     â”‚ 126.3mb  â”‚ 100%     â”‚
â”‚ 1  â”‚ strategy-worker  â”‚ online â”‚ 44s     â”‚ 76.7mb   â”‚ 0%       â”‚
â”‚ 2  â”‚ data-cleaner     â”‚ online â”‚ 23s     â”‚ 51.4mb   â”‚ 0%       â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å†…å­˜å ç”¨æ±‡æ€»
- main-app: 126.3MB
- strategy-worker: 76.7MB
- data-cleaner: 51.4MB
- **æ€»è®¡**: 254.4MB
- **ç³»ç»Ÿä½¿ç”¨**: 44.8%

---

## âœ… å†…å­˜ä½¿ç”¨åˆ†æ

### ä¼˜åŒ–æªæ–½

#### 1. ç¾è‚¡ç­–ç•¥å†…å­˜ä¼˜åŒ– âœ…
- âœ… PnLæ›´æ–°é¢‘ç‡å‡å°‘90%ï¼ˆæ¯10æ ¹Kçº¿æ›´æ–°ï¼‰
- âœ… tradesæ•°ç»„å®šæœŸæ¸…ç†ï¼ˆä¿ç•™æœ€è¿‘100æ¡ï¼‰
- âœ… æ·»åŠ 512MBå†…å­˜é™åˆ¶
- âœ… æ·»åŠ å†…å­˜ç›‘æ§å’Œåƒåœ¾å›æ”¶

#### 2. PM2å†…å­˜é™åˆ¶ âœ…
```bash
# è‡ªåŠ¨é‡å¯é…ç½®
main-app: --max-memory-restart 150M
strategy-worker: --max-memory-restart 100M
data-cleaner: --max-memory-restart 50M
```

#### 3. ç¾è‚¡Workerç¦ç”¨ âœ…
- âœ… ç¾è‚¡Workeré»˜è®¤ä¸å¯åŠ¨
- âœ… éœ€è¦é€šè¿‡ç¯å¢ƒå˜é‡å¯ç”¨
- âœ… é¿å…å ç”¨é¢å¤–å†…å­˜

---

## ğŸ“ˆ åŒæ—¶è¿è¡ŒåŠ å¯†è´§å¸å’Œç¾è‚¡ç­–ç•¥çš„å†…å­˜é¢„ä¼°

### åŠ å¯†è´§å¸æœåŠ¡
- main-app: ~120MB
- strategy-worker: ~75MB
- data-cleaner: ~50MB
- **å°è®¡**: ~245MB

### ç¾è‚¡æœåŠ¡ï¼ˆå¦‚æœå¯ç”¨ï¼‰
- us-stock-backtest-engine: ~50MBï¼ˆä»…åœ¨å›æµ‹æ—¶ï¼‰
- us-stock-market-data-loader: ~30MB
- us-stock-simulation-trades: ~20MB
- **å°è®¡**: ~100MBï¼ˆä»…åœ¨ä½¿ç”¨æ—¶ï¼‰

### é¢„ä¼°æ€»å†…å­˜ä½¿ç”¨
- **åŠ å¯†è´§å¸**: 245MB
- **ç¾è‚¡å›æµ‹**: 100MBï¼ˆæŒ‰éœ€ï¼‰
- **ç³»ç»Ÿå¼€é”€**: ~200MB
- **æ€»è®¡**: ~545MB (34% of 1.6Gi) < 60% âœ…

---

## ğŸ¯ è¾¾åˆ°ç›®æ ‡

### å†…å­˜ä½¿ç”¨ç›®æ ‡ï¼š< 60%
```
å½“å‰ä½¿ç”¨: 44.8%
ç›®æ ‡: < 60%
çŠ¶æ€: âœ… è¾¾æ ‡
```

### åŠ å¯†è´§å¸æœåŠ¡çŠ¶æ€
```
main-app: âœ… æ­£å¸¸è¿è¡Œ
strategy-worker: âœ… æ­£å¸¸è¿è¡Œ
data-cleaner: âœ… æ­£å¸¸è¿è¡Œ
```

### ç¾è‚¡ç­–ç•¥çŠ¶æ€
```
ä»£ç å·²éƒ¨ç½²: âœ…
Workeræœªå¯åŠ¨: âœ…ï¼ˆé¿å…å ç”¨å†…å­˜ï¼‰
å¯æŒ‰éœ€ä½¿ç”¨: âœ…ï¼ˆé€šè¿‡APIè§¦å‘ï¼‰
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç¾è‚¡Workeræœªå¯åŠ¨
- ç¾è‚¡Workeré»˜è®¤ç¦ç”¨ï¼Œä¸å ç”¨å†…å­˜
- éœ€è¦æ—¶å¯é€šè¿‡ç¯å¢ƒå˜é‡å¯ç”¨
- ä¸ä¼šå½±å“åŠ å¯†è´§å¸æœåŠ¡

### 2. å†…å­˜ç›‘æ§
```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# æŸ¥çœ‹PM2è¿›ç¨‹
pm2 list

# å®æ—¶ç›‘æ§
pm2 monit
```

### 3. PM2è‡ªåŠ¨é‡å¯
- main-app: è¶…è¿‡150MBè‡ªåŠ¨é‡å¯
- strategy-worker: è¶…è¿‡100MBè‡ªåŠ¨é‡å¯
- data-cleaner: è¶…è¿‡50MBè‡ªåŠ¨é‡å¯

---

## ğŸ”§ å¦‚æœå†…å­˜å¢é•¿åˆ°>60%

### è‡ªåŠ¨å¤„ç†
- PM2ä¼šåœ¨è¶…è¿‡é™åˆ¶æ—¶è‡ªåŠ¨é‡å¯è¿›ç¨‹
- ç³»ç»Ÿæœ‰Swapç©ºé—´ï¼ˆ1GBï¼‰ä½œä¸ºç¼“å†²

### æ‰‹åŠ¨å¤„ç†
```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
pm2 restart all

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h
pm2 list

# å¦‚æœä»ç„¶é«˜ï¼Œé‡å¯VPS
reboot
```

---

## âœ… éªŒè¯æ¸…å•

- [x] ä»£ç å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
- [x] PM2è¿›ç¨‹æ­£å¸¸è¿è¡Œ
- [x] åŠ å¯†è´§å¸ç­–ç•¥æ­£å¸¸æ‰§è¡Œ
- [x] å†…å­˜ä½¿ç”¨ < 60%
- [x] main-appæ­£å¸¸è¿è¡Œ
- [x] strategy-workeræ­£å¸¸è¿è¡Œ
- [x] data-cleaneræ­£å¸¸è¿è¡Œ
- [x] ç¾è‚¡ç­–ç•¥ä»£ç å·²éƒ¨ç½²
- [x] ç¾è‚¡Workerç¦ç”¨ï¼ˆé¿å…å ç”¨å†…å­˜ï¼‰
- [x] å†…å­˜ç›‘æ§å·²é…ç½®

---

## ğŸ“Š æœ€ç»ˆçŠ¶æ€

### ç³»ç»Ÿèµ„æº
- **æ€»å†…å­˜**: 1.6Gi
- **å·²ä½¿ç”¨**: 717Mi (44.8%)
- **å‰©ä½™**: 895Mi (55.2%)
- **Swap**: 1.0Giï¼ˆæœªä½¿ç”¨ï¼‰

### æœåŠ¡çŠ¶æ€
- âœ… main-app: æ­£å¸¸è¿è¡Œ
- âœ… strategy-worker: æ­£å¸¸è¿è¡Œ
- âœ… data-cleaner: æ­£å¸¸è¿è¡Œ
- âœ… åŠ å¯†è´§å¸ç­–ç•¥æ­£å¸¸æ‰§è¡Œ
- âœ… å†…å­˜ä½¿ç”¨æ­£å¸¸ï¼ˆ< 60%ï¼‰

### ç¾è‚¡æ¨¡å—
- âœ… ä»£ç å·²éƒ¨ç½²
- âœ… Workerç¦ç”¨ï¼ˆä¸å ç”¨å†…å­˜ï¼‰
- âœ… å¯æŒ‰éœ€ä½¿ç”¨ï¼ˆAPIè§¦å‘ï¼‰
- âœ… ä¸å½±å“åŠ å¯†è´§å¸æœåŠ¡

---

## ğŸ‰ æ€»ç»“

### æˆåŠŸå®Œæˆ
1. âœ… ä»£ç å·²æ›´æ–°åˆ°VPS
2. âœ… å†…å­˜æ³„æ¼å·²ä¿®å¤
3. âœ… åŠ å¯†è´§å¸æœåŠ¡æ­£å¸¸è¿è¡Œ
4. âœ… å†…å­˜ä½¿ç”¨ < 60%
5. âœ… PM2é…ç½®å·²ä¼˜åŒ–
6. âœ… ç¾è‚¡æ¨¡å—å·²éƒ¨ç½²ä½†æœªå¯ç”¨

### å…³é”®æˆå°±
1. **å†…å­˜ä¼˜åŒ–**: 44.8% < 60% âœ…
2. **æœåŠ¡ç¨³å®š**: æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ âœ…
3. **ç­–ç•¥æ­£å¸¸**: åŠ å¯†è´§å¸ç­–ç•¥æ­£å¸¸æ‰§è¡Œ âœ…
4. **ç›‘æ§é…ç½®**: PM2è‡ªåŠ¨é‡å¯é…ç½®å®Œæˆ âœ…
5. **ç¾è‚¡å°±ç»ª**: å¯æŒ‰éœ€å¯ç”¨ âœ…

**VPSå†…å­˜ä¼˜åŒ–å®Œæˆï¼ŒåŠ å¯†è´§å¸æœåŠ¡æ­£å¸¸è¿è¡Œï¼** ğŸŠ

