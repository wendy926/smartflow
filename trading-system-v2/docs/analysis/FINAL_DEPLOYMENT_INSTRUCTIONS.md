# æœ€ç»ˆéƒ¨ç½²è¯´æ˜ (2025-10-08)

## âœ… GitHubæ¨é€å®Œæˆ

æ‰€æœ‰ä¿®å¤å·²æˆåŠŸæ¨é€åˆ°GitHubä»“åº“ã€‚

### æäº¤è®°å½•

**æäº¤1ï¼š** `b714f94` - ç­–ç•¥é€»è¾‘ä¼˜åŒ–å’Œæ–‡æ¡£æ›´æ–°
- ICTç­–ç•¥15åˆ†é’Ÿå…¥åœºå¼ºä¿¡å·è¦æ±‚ï¼ˆâ‰¥60åˆ†ï¼‰
- æ¶ˆé™¤ç¡¬ç¼–ç åˆ†æ•°ï¼Œç»Ÿä¸€åŠ¨æ€è®¡ç®—
- ç»Ÿä¸€ç½®ä¿¡åº¦ä¸ºæ•°å€¼ç±»å‹
- V3ç­–ç•¥éœ‡è¡å¸‚å‡çªç ´ä¿®å¤
- å‰ç«¯15Må…¥åœºåˆ¤æ–­ä¸€è‡´æ€§
- æ–‡æ¡£å®Œæ•´æ›´æ–°ï¼ˆV3åŠ¨æ€æƒé‡ã€è¡¥å¿æœºåˆ¶ã€éœ‡è¡å¸‚ç­‰ï¼‰

**æäº¤2ï¼š** `d3da0b6` - ä¿®å¤BNBUSDT V3ç­–ç•¥æ•°æ®ä¸º0çš„é—®é¢˜
- current-statusç«¯ç‚¹æ”¹ä¸ºä½¿ç”¨v3Strategy
- ä¸ç›´æ¥V3 APIè°ƒç”¨ä¿æŒä¸€è‡´

**GitHubä»“åº“ï¼š** https://github.com/wendy926/smartflow.git

---

## ğŸš€ VPSéƒ¨ç½²å‘½ä»¤ï¼ˆè¯·åœ¨VPSä¸Šæ‰§è¡Œï¼‰

### å®Œæ•´éƒ¨ç½²æµç¨‹

è¯·ä½¿ç”¨**VPS Webæ§åˆ¶å°**æˆ–ä¿®å¤SSHåæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /root/trading-system-v2

# 2. æŸ¥çœ‹å½“å‰çŠ¶æ€
git status

# 3. å¦‚æœæœ‰æœ¬åœ°ä¿®æ”¹ï¼Œå…ˆå¤‡ä»½
git stash

# 4. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 5. æŸ¥çœ‹æ›´æ–°çš„æ–‡ä»¶
git log --oneline -2
git show --stat

# 6. é‡å¯æ‰€æœ‰æœåŠ¡
pm2 restart all

# 7. é‡è½½Nginx
nginx -s reload

# 8. æ£€æŸ¥æœåŠ¡çŠ¶æ€
pm2 status

# 9. æŸ¥çœ‹æœ€è¿‘æ—¥å¿—
pm2 logs main-app --lines 20 --nostream
```

### å¿«æ·å‘½ä»¤ï¼ˆä¸€è¡Œå®Œæˆï¼‰

```bash
cd /root/trading-system-v2 && git pull origin main && pm2 restart all && nginx -s reload && pm2 status
```

---

## ğŸ“‹ éƒ¨ç½²å†…å®¹æ¸…å•

### ä¿®å¤çš„æ–‡ä»¶ï¼ˆ5ä¸ªï¼‰

1. âœ… **src/strategies/ict-strategy.js**
   - 15åˆ†é’Ÿå…¥åœºå¢åŠ ç¬¬5ä¸ªé—¨æ§›ï¼ˆæ€»åˆ†â‰¥60åˆ†ï¼‰
   - æ¶ˆé™¤ç¡¬ç¼–ç åˆ†æ•°30/40
   - ç»Ÿä¸€ç½®ä¿¡åº¦è®¡ç®—
   - æ·»åŠ engulfingTypeå­—æ®µ

2. âœ… **src/strategies/v3-strategy.js**
   - ä¿®å¤éœ‡è¡å¸‚å‡çªç ´ä¿¡å·å¤„ç†
   - combineSignalsæ£€æŸ¥RANGEæ¨¡å¼

3. âœ… **src/web/app.js**
   - 15Må…¥åœºåˆ¤æ–­å¢åŠ æ€»åˆ†â‰¥60åˆ†æ£€æŸ¥
   - å‰ç«¯ä¸åç«¯é€»è¾‘å®Œå…¨ä¸€è‡´

4. âœ… **src/web/index.html**
   - V3ç­–ç•¥ï¼šåŠ¨æ€æƒé‡ã€è¡¥å¿æœºåˆ¶ã€éœ‡è¡å¸‚é€»è¾‘ã€æ æ†24å€
   - ICTç­–ç•¥ï¼š5ä¸ªé—¨æ§›ã€60åˆ†é˜ˆå€¼ã€è®¢å•å—5å¤©ã€æ æ†24å€
   - ä¿®å¤å¯¼èˆªé”šç‚¹
   - æ·»åŠ "ç­–ç•¥ä¼˜åŒ–æ›´æ–° (2025-10-08)"ç« èŠ‚

5. âœ… **src/api/routes/strategies.js**
   - current-statusç«¯ç‚¹æ”¹ç”¨v3Strategy
   - batch-analyzeç«¯ç‚¹æ”¹ç”¨v3Strategy
   - ä¿®å¤BNBUSDTæ•°æ®ä¸º0çš„é—®é¢˜

---

## ğŸ” éƒ¨ç½²åéªŒè¯ï¼ˆå¿…åšï¼‰

### 1. éªŒè¯æœåŠ¡çŠ¶æ€

```bash
pm2 status
```

**é¢„æœŸï¼š** main-appå’Œstrategy-workeréƒ½åº”è¯¥æ˜¯"online"çŠ¶æ€

---

### 2. éªŒè¯BNBUSDT V3ç­–ç•¥æ•°æ®

```bash
curl -s "https://smart.aimaventop.com/api/v1/strategies/current-status?limit=10" | \
  jq '.data[] | select(.symbol == "BNBUSDT") | .v3.timeframes."4H" | {trend, score, ma20, ma50, adx}'
```

**é¢„æœŸè¾“å‡ºï¼ˆåº”è¯¥æœ‰å€¼ï¼Œä¸å†å…¨æ˜¯0ï¼‰ï¼š**
```json
{
  "trend": "UP",
  "score": 8,
  "ma20": 1234.257,
  "ma50": 1142.1458,
  "adx": 61.245
}
```

---

### 3. éªŒè¯ICTç­–ç•¥å¼ºä¿¡å·é€»è¾‘

```bash
curl -s "https://smart.aimaventop.com/api/v1/strategies/current-status?limit=5" | \
  jq '.data[] | {symbol, ict: {signal, score, confidence: (.ict.confidence | type), trend}}'
```

**éªŒè¯è¦ç‚¹ï¼š**
- âœ… `confidence` ç±»å‹åº”ä¸º"number"ï¼ˆä¸æ˜¯"string"ï¼‰
- âœ… åªæœ‰æ€»åˆ†â‰¥60åˆ†çš„æ‰å¯èƒ½æœ‰BUY/SELLä¿¡å·
- âœ… æ€»åˆ†<60åˆ†çš„åº”è¯¥æ˜¯WATCHæˆ–HOLD

---

### 4. éªŒè¯åœ¨çº¿æ–‡æ¡£

**è®¿é—®ï¼š** https://smart.aimaventop.com/docs

**å¼ºåˆ¶åˆ·æ–°ï¼š** Ctrl+Shift+R (Windows) æˆ– Cmd+Shift+R (Mac)

**éªŒè¯æ¸…å•ï¼š**

#### V3ç­–ç•¥
- [ ] çœ‹åˆ°"åŠ¨æ€æƒé‡è°ƒæ•´"è¡¨æ ¼ï¼ˆé»˜è®¤/è¶‹åŠ¿å¼º/å› å­å¼º/å…¥åœºå¼ºï¼‰
- [ ] çœ‹åˆ°"è¡¥å¿æœºåˆ¶"å…¬å¼å’Œè¯´æ˜
- [ ] çœ‹åˆ°"éœ‡è¡å¸‚ç‰¹æ®Šå¤„ç†"ç« èŠ‚
- [ ] æ æ†é™åˆ¶æ˜¾ç¤º"æœ€å¤§24å€"ï¼ˆç»¿è‰²é«˜äº®ï¼‰

#### ICTç­–ç•¥
- [ ] çœ‹åˆ°"15Må…¥åœºæ¡ä»¶"è¡¨æ ¼ï¼Œæ˜¾ç¤º5ä¸ªé—¨æ§›
- [ ] ç¬¬5ä¸ªé—¨æ§›"æ€»åˆ†â‰¥60åˆ†"æœ‰é»„è‰²èƒŒæ™¯
- [ ] ä¿¡å·ç”Ÿæˆé€»è¾‘è¯´æ˜60åˆ†é˜ˆå€¼
- [ ] è®¢å•å—å¹´é¾„æ˜¾ç¤º"â‰¤5å¤©"ï¼ˆç»¿è‰²é«˜äº®ï¼‰
- [ ] æ æ†é™åˆ¶æ˜¾ç¤º"æœ€å¤§24å€"ï¼ˆç»¿è‰²é«˜äº®ï¼‰

#### ç­–ç•¥ä¼˜åŒ–æ›´æ–°ç« èŠ‚
- [ ] å·¦ä¾§ç‚¹å‡»"ç­–ç•¥ä¼˜åŒ–æ›´æ–° (2025-10-08)"èƒ½è·³è½¬
- [ ] çœ‹åˆ°æ‰€æœ‰ä¿®å¤è¯´æ˜
- [ ] çœ‹åˆ°ä¿®å¤æ•ˆæœå¯¹æ¯”è¡¨æ ¼

---

### 5. éªŒè¯å‰ç«¯ä»ªè¡¨æ¿

**è®¿é—®ï¼š** https://smart.aimaventop.com/dashboard

**éªŒè¯æ¸…å•ï¼š**
- [ ] BNBUSDTçš„V3ç­–ç•¥æ•°æ®ä¸å†å…¨æ˜¯0
- [ ] ICTç­–ç•¥15Må…¥åœº"æœ‰æ•ˆ"çš„äº¤æ˜“å¯¹ï¼Œæ€»åˆ†â‰¥60åˆ†
- [ ] ç½®ä¿¡åº¦æ˜¾ç¤ºä¸ºä¸­æ–‡ï¼ˆé«˜/ä¸­/ä½ï¼‰
- [ ] æ€»åˆ†ä¸å†å‡ºç°30/40ç­‰ç¡¬ç¼–ç å€¼

---

## ğŸ“Š ä¿®å¤æ€»ç»“

### æ ¸å¿ƒä¿®å¤ï¼ˆ3ä¸ªå…³é”®é—®é¢˜ï¼‰

1. **ICTç­–ç•¥15Må…¥åœºå¼ºä¿¡å·è¦æ±‚**
   - æ–°å¢ç¬¬5ä¸ªé—¨æ§›ï¼šæ€»åˆ†â‰¥60åˆ†
   - æé«˜ä¿¡å·è´¨é‡ï¼Œåªè§¦å‘å¼ºä¿¡å·
   - å‰åç«¯é€»è¾‘å®Œå…¨ä¸€è‡´

2. **V3ç­–ç•¥éœ‡è¡å¸‚äº¤æ˜“é€»è¾‘**
   - combineSignalsæ£€æŸ¥å‡çªç ´ä¿¡å·
   - éœ‡è¡å¸‚èƒ½å¤Ÿæ­£å¸¸è§¦å‘äº¤æ˜“

3. **BNBUSDT V3ç­–ç•¥æ•°æ®é—®é¢˜**
   - ç»Ÿä¸€ä½¿ç”¨v3Strategy
   - é¿å…æ•°æ®ç»“æ„ä¸ä¸€è‡´

### æ–‡æ¡£æ›´æ–°ï¼ˆ10é¡¹ï¼‰

**V3ç­–ç•¥ï¼š**
1. âœ… åŠ¨æ€æƒé‡è°ƒæ•´æœºåˆ¶
2. âœ… è¡¥å¿æœºåˆ¶è¯¦ç»†è¯´æ˜
3. âœ… éœ‡è¡å¸‚å‡çªç ´é€»è¾‘
4. âœ… æ æ†é™åˆ¶24å€

**ICTç­–ç•¥ï¼š**
5. âœ… 15Må…¥åœº5ä¸ªé—¨æ§›
6. âœ… ä¿¡å·ç”Ÿæˆ60åˆ†é˜ˆå€¼
7. âœ… è®¢å•å—å¹´é¾„5å¤©
8. âœ… è®¢å•å—æ£€æµ‹è¯¦ç»†ç®—æ³•
9. âœ… æ æ†é™åˆ¶24å€
10. âœ… ç­–ç•¥ä¼˜åŒ–æ›´æ–°ç« èŠ‚

---

## âš ï¸ é‡è¦æç¤º

### SSHè¿æ¥é—®é¢˜

å½“å‰SSHè¿æ¥æœ‰é—®é¢˜ï¼ˆ"Connection closed by 127.0.0.1 port 10808"ï¼‰ã€‚

**æ›¿ä»£æ–¹æ¡ˆï¼š**
1. **æ¨èï¼šä½¿ç”¨VPS Webæ§åˆ¶å°** - å¤§å¤šæ•°VPSæä¾›å•†éƒ½æœ‰Webç»ˆç«¯
2. ä½¿ç”¨VPSæ–‡ä»¶ç®¡ç†å™¨æ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶
3. è”ç³»VPSæä¾›å•†è§£å†³SSHé—®é¢˜

### éƒ¨ç½²æ—¶é—´

- æ‹‰å–ä»£ç ï¼š< 10ç§’
- é‡å¯æœåŠ¡ï¼šçº¦30ç§’
- æ€»è®¡ï¼š< 1åˆ†é’Ÿ

### å›æ»šæ–¹æ¡ˆ

å¦‚æœå‡ºç°é—®é¢˜ï¼Œç«‹å³å›æ»šï¼š
```bash
cd /root/trading-system-v2
git reset --hard HEAD~2
pm2 restart all
```

---

## ğŸ¯ æ‰§è¡Œæ‘˜è¦

**å‡†å¤‡å°±ç»ªï¼š** âœ… æ‰€æœ‰ä»£ç å·²æ¨é€åˆ°GitHub  
**ç­‰å¾…æ“ä½œï¼š** åœ¨VPSä¸Šæ‰§è¡Œ `git pull origin main`  
**é¢„æœŸæ—¶é—´ï¼š** < 1åˆ†é’Ÿ  
**é£é™©ç­‰çº§ï¼š** ğŸŸ¢ ä½ï¼ˆå·²å……åˆ†æµ‹è¯•ï¼Œæœ‰å›æ»šæ–¹æ¡ˆï¼‰

**ç«‹å³åœ¨VPSä¸Šæ‰§è¡Œï¼š**
```bash
cd /root/trading-system-v2 && git pull origin main && pm2 restart all && nginx -s reload
```

éƒ¨ç½²å‡†å¤‡å®Œæˆï¼Œç­‰å¾…VPSæ‰§è¡Œï¼ğŸš€

