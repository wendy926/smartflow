# ç”¨æˆ·è®¤è¯ç³»ç»Ÿå®ç°å®Œæˆæ€»ç»“

**æ—¥æœŸ**: 2025-10-26  
**ç‰ˆæœ¬**: v3.0.0  
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶éƒ¨ç½²

---

## ğŸ¯ å®ç°ç›®æ ‡

1. é¦–é¡µæ”¹ä¸ºç‹¬ç«‹äº§å“ä»‹ç»é¡µï¼ˆä¸å†ç›´æ¥è·³è½¬dashboardï¼‰
2. å®ç°ç”¨æˆ·æ³¨å†Œç™»å½•åŠŸèƒ½ï¼ˆé‚®ç®±+å¯†ç ï¼‰
3. ä¸ºæ‰€æœ‰APIæ·»åŠ é‰´æƒä¿æŠ¤
4. å‰ç«¯APIè°ƒç”¨è‡ªåŠ¨æºå¸¦token

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

#### æ•°æ®åº“è®¾è®¡
- `users` - ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
- `user_sessions` - ç”¨æˆ·ä¼šè¯ç®¡ç†
- `user_permissions` - ç”¨æˆ·æƒé™
- `contact_submissions` - è”ç³»ä¿¡æ¯ï¼ˆå•†æœºè·å–ï¼‰

#### APIæ¥å£
- **POST** `/api/v1/auth/register` - ç”¨æˆ·æ³¨å†Œ
- **POST** `/api/v1/auth/login` - ç”¨æˆ·ç™»å½•
- **POST** `/api/v1/auth/logout` - ç”¨æˆ·é€€å‡º
- **GET** `/api/v1/auth/me` - è·å–ç”¨æˆ·ä¿¡æ¯
- **POST** `/api/v1/auth/contact` - æäº¤è”ç³»æ–¹å¼

#### è®¤è¯æœºåˆ¶
- JWT tokenè®¤è¯ï¼ˆ7å¤©æœ‰æ•ˆæœŸï¼‰
- Refresh tokenæ”¯æŒ
- å¯†ç bcryptåŠ å¯†
- ä¼šè¯æŒä¹…åŒ–åˆ°æ•°æ®åº“

---

### 2. APIé‰´æƒä¿æŠ¤

#### å—ä¿æŠ¤çš„APIï¼ˆéœ€è¦è®¤è¯ï¼‰
```
âœ… /api/v1/strategies
âœ… /api/v1/symbols
âœ… /api/v1/trades
âœ… /api/v1/monitoring
âœ… /api/v1/macro-monitor
âœ… /api/v1/smart-money
âœ… /api/v1/smart-money-monitor
âœ… /api/v1/smart-money-four-phase
âœ… /api/v1/smart-money-four-phase-notifier
âœ… /api/v1/large-orders
âœ… /api/v1/large-orders-advanced
âœ… /api/v1/smart-money-v2
âœ… /api/v1/ict-position
âœ… /api/v1/tools
âœ… /api/v1/telegram
âœ… /api/v1/settings
âœ… /api/v1/ai
âœ… /api/v1/position-monitor
âœ… /api/v1/strategy-params
âœ… /api/v1/backtest
```

#### å…¬å¼€APIï¼ˆæ— éœ€è®¤è¯ï¼‰
```
âœ… /api/v1/auth (æ³¨å†Œç™»å½•æ¥å£)
âœ… /health (å¥åº·æ£€æŸ¥)
```

---

### 3. ç»Ÿä¸€APIå®¢æˆ·ç«¯

**æ–‡ä»¶**: `src/web/public/js/api-client.js`

**åŠŸèƒ½**:
- è‡ªåŠ¨æ·»åŠ Authorization header
- 401é”™è¯¯è‡ªåŠ¨è·³è½¬ç™»å½•
- ç»Ÿä¸€é”™è¯¯å¤„ç†
- Tokenè‡ªåŠ¨ç®¡ç†

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// ä½¿ç”¨apiClientå‘é€è¯·æ±‚
const data = await apiClient.get('/strategies');
const result = await apiClient.post('/trades', tradeData);
```

---

### 4. é¦–é¡µäº§å“ä»‹ç»é¡µ

**æ–‡ä»¶**: `src/web/home.html`

**åŠŸèƒ½**:
- é¡¶éƒ¨å¯¼èˆªæ ï¼ˆç™»å½•/æ³¨å†ŒæŒ‰é’®ï¼‰
- äº§å“åŠŸèƒ½å’Œäº®ç‚¹å±•ç¤º
- å¤šå¸‚åœºå…¥å£ï¼ˆåŠ å¯†è´§å¸ã€Aè‚¡ã€ç¾è‚¡ï¼‰
- ç™»å½•/æ³¨å†Œæ¨¡æ€æ¡†
- Tokenæœ¬åœ°å­˜å‚¨
- ç™»å½•åè‡ªåŠ¨è·³è½¬

---

## ğŸ”§ æŠ€æœ¯å®ç°

### åç«¯æ¶æ„

```
src/
â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ auth.js                    # JWTé‰´æƒä¸­é—´ä»¶
â”œâ”€â”€ api/routes/
â”‚   â””â”€â”€ auth.js                    # è®¤è¯APIè·¯ç”±
â””â”€â”€ main.js                        # ä¸»åº”ç”¨ï¼ˆé…ç½®é‰´æƒä¿æŠ¤ï¼‰

database/
â””â”€â”€ users_schema.sql               # ç”¨æˆ·æ•°æ®åº“schema
```

### å‰ç«¯æ¶æ„

```
src/web/
â”œâ”€â”€ home.html                      # é¦–é¡µäº§å“ä»‹ç»
â””â”€â”€ public/js/
    â””â”€â”€ api-client.js              # ç»Ÿä¸€APIå®¢æˆ·ç«¯
```

---

## ğŸ” å®‰å…¨ç‰¹æ€§

### 1. å¯†ç å®‰å…¨
- BcryptåŠ å¯†ï¼ˆ10è½®ç›å€¼ï¼‰
- å¯†ç é•¿åº¦éªŒè¯ï¼ˆæœ€å°‘8ä½ï¼‰
- é‚®ç®±æ ¼å¼éªŒè¯

### 2. Tokenå®‰å…¨
- JWTç­¾åéªŒè¯
- è¿‡æœŸè‡ªåŠ¨å¤±æ•ˆ
- ä¼šè¯å­˜å‚¨åˆ°æ•°æ®åº“

### 3. APIå®‰å…¨
- æ‰€æœ‰äº¤æ˜“APIéœ€è¦è®¤è¯
- 401è‡ªåŠ¨è·³è½¬ç™»å½•
- Tokenè‡ªåŠ¨è¿‡æœŸç®¡ç†

---

## ğŸ“Š è®¿é—®æµç¨‹

### æœªç™»å½•ç”¨æˆ·
```
è®¿é—® https://smart.aimaventop.com/
  â†“
çœ‹åˆ°äº§å“ä»‹ç»é¡µ
  â†“
ç‚¹å‡»"æ³¨å†Œ"æˆ–"ç™»å½•"
  â†“
å¡«å†™ä¿¡æ¯æäº¤
  â†“
è‡ªåŠ¨è·³è½¬åˆ°äº¤æ˜“ç³»ç»Ÿ
```

### å·²ç™»å½•ç”¨æˆ·
```
è®¿é—® https://smart.aimaventop.com/
  â†“
è‡ªåŠ¨è·³è½¬åˆ° /crypto/dashboard
  â†“
æ‰€æœ‰APIè‡ªåŠ¨æºå¸¦token
  â†“
éœ€è¦é‡æ–°ç™»å½•æ—¶ä¼šè‡ªåŠ¨è·³è½¬
```

---

## ğŸš€ éƒ¨ç½²çŠ¶æ€

- [x] æœ¬åœ°å¼€å‘å®Œæˆ
- [x] ä»£ç æäº¤åˆ°GitHub
- [x] VPSä»£ç å·²æ›´æ–°
- [x] æ•°æ®åº“ç”¨æˆ·è¡¨å·²åˆ›å»º
- [x] PM2æœåŠ¡å·²é‡å¯
- [x] ç½‘ç«™å·²æ›´æ–°

**è®¿é—®**: https://smart.aimaventop.com/

---

## ğŸ“ æ–‡ä»¶ä¿®æ”¹æ¸…å•

### æ–°å¢æ–‡ä»¶
- `database/users_schema.sql` - ç”¨æˆ·æ•°æ®åº“schema
- `src/middleware/auth.js` - JWTé‰´æƒä¸­é—´ä»¶
- `src/api/routes/auth.js` - è®¤è¯APIè·¯ç”±
- `src/web/public/js/api-client.js` - ç»Ÿä¸€APIå®¢æˆ·ç«¯

### ä¿®æ”¹æ–‡ä»¶
- `src/main.js` - æ·»åŠ é‰´æƒä¸­é—´ä»¶åˆ°æ‰€æœ‰API
- `src/web/home.html` - æ·»åŠ ç™»å½•æ³¨å†ŒUI

---

## ğŸ¨ ç”¨æˆ·ä½“éªŒ

### ç™»å½•æ³¨å†Œæµç¨‹
1. **æ³¨å†Œ**: å¡«å†™é‚®ç®±ã€å¯†ç ã€å§“åã€å…¬å¸ï¼ˆå¯é€‰ï¼‰
2. **ç™»å½•**: å¡«å†™é‚®ç®±ã€å¯†ç 
3. **è‡ªåŠ¨ä¿å­˜**: Tokenä¿å­˜åˆ°localStorage
4. **è‡ªåŠ¨è·³è½¬**: ç™»å½•åè·³è½¬åˆ°åŠ å¯†è´§å¸ä»ªè¡¨æ¿

### APIè°ƒç”¨
- **è‡ªåŠ¨æºå¸¦Token**: æ‰€æœ‰è¯·æ±‚è‡ªåŠ¨æ·»åŠ Authorization header
- **è‡ªåŠ¨å¤„ç†401**: æœªæˆæƒè‡ªåŠ¨è·³è½¬ç™»å½•
- **ç»Ÿä¸€é”™è¯¯å¤„ç†**: å‹å¥½çš„é”™è¯¯æç¤º

---

## ğŸ‰ æ€»ç»“

âœ… **ç”¨æˆ·è®¤è¯ç³»ç»Ÿå·²å®Œæˆï¼**

**æ ¸å¿ƒæˆå°±**:
1. âœ… ç‹¬ç«‹äº§å“ä»‹ç»é¦–é¡µ
2. âœ… å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œç™»å½•åŠŸèƒ½
3. âœ… æ‰€æœ‰APIé‰´æƒä¿æŠ¤
4. âœ… ç»Ÿä¸€APIå®¢æˆ·ç«¯
5. âœ… è‡ªåŠ¨tokenç®¡ç†

**å®‰å…¨ç‰¹æ€§**:
- JWT tokenè®¤è¯
- å¯†ç bcryptåŠ å¯†
- ä¼šè¯æ•°æ®åº“æŒä¹…åŒ–
- 401è‡ªåŠ¨è·³è½¬ç™»å½•

**ç”¨æˆ·ä½“éªŒ**:
- ç®€æ´çš„ç™»å½•æ³¨å†Œæµç¨‹
- è‡ªåŠ¨ä¿å­˜å’Œè·³è½¬
- å‹å¥½çš„é”™è¯¯æç¤º
- ç»Ÿä¸€APIè°ƒç”¨æ¥å£

ç³»ç»Ÿå·²å…·å¤‡å®Œæ•´çš„ç”¨æˆ·è®¤è¯åŠŸèƒ½ï¼Œæ‰€æœ‰APIå·²å—ä¿æŠ¤ï¼Œç”¨æˆ·éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®äº¤æ˜“ç³»ç»Ÿã€‚

