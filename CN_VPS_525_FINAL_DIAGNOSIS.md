# CN VPS 525é”™è¯¯æœ€ç»ˆè¯Šæ–­

## ğŸ” å½“å‰çŠ¶æ€

### æœåŠ¡çŠ¶æ€ âœ…
```
HTTPSæœåŠ¡: âœ… è¿è¡Œä¸­
ç«¯å£443: âœ… æ­£å¸¸ç›‘å¬
ç«¯å£80: âœ… æ­£å¸¸ç›‘å¬
è¯ä¹¦: âœ… Cloudflare Origin CAå·²é…ç½®
æƒé™: âœ… æ­£ç¡®é…ç½®
```

### ç½‘ç»œæµ‹è¯• âœ…
```
æœ¬åœ°HTTPS: âœ… æ­£å¸¸å“åº”
å¤–ç½‘HTTPS: âœ… æ­£å¸¸å“åº”
è¯ä¹¦éªŒè¯: âœ… Cloudflare Origin CA
```

### ä½†Cloudflareè®¿é—® âŒ
```
https://smart.aimaven.top/ â†’ 521é”™è¯¯
```

## âš ï¸ é—®é¢˜åˆ†æ

### å¯èƒ½çš„åŸå› 

#### 1. Cloudflareæºç«¯å£é…ç½®
**é—®é¢˜**: Cloudflareå¯èƒ½åªè¿æ¥åˆ°80ç«¯å£è€Œé443ç«¯å£

**æ£€æŸ¥æ–¹æ³•**:
1. ç™»å½•Cloudflareæ§åˆ¶å°
2. è¿›å…¥ `SSL/TLS` â†’ `æºæœåŠ¡å™¨`
3. æŸ¥çœ‹"æºç«¯å£"è®¾ç½®
4. ç¡®ä¿è®¾ç½®ä¸º443

#### 2. DNSè®°å½•é…ç½®
**é—®é¢˜**: DNSè®°å½•å¯èƒ½æŒ‡å‘é”™è¯¯IP

**æ£€æŸ¥æ–¹æ³•**:
```bash
# åœ¨CloudflareæŸ¥çœ‹DNSè®°å½•
ç±»å‹: A
åç§°: smart
å†…å®¹: 121.41.228.109
ä»£ç†: å·²å¯ç”¨ï¼ˆæ©™è‰²äº‘æœµï¼‰
ç«¯å£: éœ€è¦æ£€æŸ¥
```

#### 3. Cloudflareç¼“å­˜
**é—®é¢˜**: Cloudflareå¯èƒ½ç¼“å­˜äº†æ—§çš„è¿æ¥å¤±è´¥çŠ¶æ€

**è§£å†³æ–¹æ³•**:
1. Cloudflareæ§åˆ¶å° â†’ Caching
2. ç‚¹å‡» "Purge Everything"
3. ç­‰å¾…5-10åˆ†é’Ÿ

#### 4. é˜¿é‡Œäº‘å®‰å…¨ç»„
**æ£€æŸ¥**: 443ç«¯å£æ˜¯å¦çœŸçš„å¯¹å¤–å¼€æ”¾

**éªŒè¯æ–¹æ³•**:
```bash
# ä»å…¶ä»–æœºå™¨æµ‹è¯•
telnet 121.41.228.109 443
```

## âœ… å»ºè®®çš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: æ£€æŸ¥æºç«¯å£é…ç½®ï¼ˆæ¨èï¼‰

åœ¨Cloudflareæ§åˆ¶å°ï¼š
1. è¿›å…¥ `SSL/TLS` â†’ `æ¦‚è§ˆ`
2. æŸ¥çœ‹"åŠ å¯†æ¨¡å¼" - åº”æ˜¾ç¤º"å®Œå…¨ï¼ˆä¸¥æ ¼ï¼‰"
3. è¿›å…¥ `æºæœåŠ¡å™¨`
4. **æ£€æŸ¥"æºç«¯å£"è®¾ç½®**
5. å¦‚æœæ²¡æœ‰443ç«¯å£é€‰é¡¹ï¼Œæ·»åŠ è‡ªå®šä¹‰ç«¯å£

### æ–¹æ¡ˆ2: ä¸´æ—¶ä½¿ç”¨å®Œå…¨æ¨¡å¼ï¼ˆéä¸¥æ ¼ï¼‰

å¦‚æœç«‹å³éœ€è¦è®¿é—®ï¼š
1. Cloudflareæ§åˆ¶å° â†’ SSL/TLS
2. å°†æ¨¡å¼æ”¹ä¸º"å®Œå…¨"ï¼ˆéä¸¥æ ¼ï¼‰
3. ç­‰å¾…1-2åˆ†é’Ÿ
4. æµ‹è¯•è®¿é—®

**æ³¨æ„**: è¿™ä¸æ˜¯é•¿æœŸè§£å†³æ–¹æ¡ˆï¼Œä½†å¯ä»¥è®©ç½‘ç«™å…ˆè¿è¡Œ

### æ–¹æ¡ˆ3: ä½¿ç”¨Cloudflare Tunnel

ä½¿ç”¨cloudflaredå»ºç«‹éš§é“ï¼š
```bash
# åœ¨CN VPSä¸Šå®‰è£…cloudflared
curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o cloudflared
chmod +x cloudflared

# è¿è¡Œéš§é“
./cloudflared tunnel --url localhost:8080
```

## ğŸ”§ è¯Šæ–­å‘½ä»¤

### æ£€æŸ¥HTTPSæœåŠ¡
```bash
ssh -i ~/.ssh/smartflow_vps_cn root@121.41.228.109 "pm2 logs https-proxy --lines 50"
```

### æ£€æŸ¥è¯ä¹¦
```bash
ssh -i ~/.ssh/smartflow_vps_cn root@121.41.228.109 "openssl x509 -in /etc/letsencrypt/live/smart.aimaven.top/fullchain.pem -text -noout | head -50"
```

### æµ‹è¯•443ç«¯å£
```bash
# ä»æœ¬åœ°æµ‹è¯•
telnet 121.41.228.109 443

# ä½¿ç”¨opensslæµ‹è¯•
openssl s_client -connect 121.41.228.109:443 -servername smart.aimaven.top
```

## ğŸ“ æ¨èæ“ä½œ

### ç«‹å³æ£€æŸ¥
1. **Cloudflareæºç«¯å£é…ç½®** - ç¡®ä¿è®¾ç½®ä¸º443
2. **æ¸…é™¤Cloudflareç¼“å­˜** - Purge Everything
3. **ç­‰å¾…5-10åˆ†é’Ÿ** - è®©Cloudflareæ›´æ–°

### å¦‚æœä»ç„¶å¤±è´¥
1. æ£€æŸ¥Cloudflareç½‘ç»œæ—¥å¿—
2. æŸ¥çœ‹æ˜¯å¦æœ‰å…¶ä»–é˜²ç«å¢™è§„åˆ™
3. è€ƒè™‘ä½¿ç”¨Cloudflare Tunnel

## âœ… æ€»ç»“

æ‰€æœ‰æœåŠ¡å™¨ç«¯é…ç½®éƒ½å·²æ­£ç¡®ï¼š
- âœ… HTTPSæœåŠ¡æ­£å¸¸è¿è¡Œ
- âœ… Cloudflare Origin CAè¯ä¹¦å·²é…ç½®
- âœ… æƒé™é…ç½®æ­£ç¡®
- âœ… ç«¯å£ç›‘å¬æ­£å¸¸

**ç°åœ¨éœ€è¦æ£€æŸ¥Cloudflareçš„é…ç½®ï¼Œç‰¹åˆ«æ˜¯æºç«¯å£è®¾ç½®ã€‚**

